{"version":3,"sources":["webpack://dotnetify/webpack/universalModuleDefinition","webpack://dotnetify/webpack/bootstrap","webpack://dotnetify/external {\"commonjs\":\"knockout\",\"commonjs2\":\"knockout\",\"amd\":\"knockout\",\"root\":\"ko\"}","webpack://dotnetify/external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack://dotnetify/./src/dotnetify/libs/utils.js","webpack://dotnetify/./node_modules/webpack/buildin/module.js","webpack://dotnetify/./src/dotnetify/knockout/dotnetify-ko.js","webpack://dotnetify/./src/dotnetify/core/dotnetify-vm-router.js","webpack://dotnetify/./src/dotnetify/knockout/dotnetify-ko.vm-router.js","webpack://dotnetify/./src/dotnetify/libs/path.js","webpack://dotnetify/./src/dotnetify/core/dotnetify-router.js","webpack://dotnetify/./src/dotnetify/knockout/dotnetify-ko.router.js","webpack://dotnetify/./src/dotnetify/knockout/knockout.mapping-latest.js","webpack://dotnetify/./src/dotnetify/knockout/jquery-ui-widget.js","webpack://dotnetify/external {\"commonjs\":\"@aspnet/signalr\",\"commonjs2\":\"@aspnet/signalr\",\"amd\":\"@aspnet/signalr\",\"root\":\"signalR\"}","webpack://dotnetify/./node_modules/jquery-deferred/lib/jquery-core.js","webpack://dotnetify/./node_modules/jquery-deferred/lib/jquery-callbacks.js","webpack://dotnetify/./node_modules/jquery-deferred/lib/jquery-deferred.js","webpack://dotnetify/./node_modules/jquery-deferred/index.js","webpack://dotnetify/./src/dotnetify/libs/jquery-shim.js","webpack://dotnetify/./node_modules/webpack/buildin/global.js","webpack://dotnetify/./src/dotnetify/core/dotnetify-hub.js","webpack://dotnetify/./src/dotnetify/core/dotnetify.js","webpack://dotnetify/./src/dotnetify/knockout/index.js"],"names":["utils","iStr","indexOf","length","substr","iStr1","iStr2","toLowerCase","iValue","slice","iEvent","Event","window","dispatchEvent","event","document","createEvent","initEvent","iArray","iFilter","Array","isArray","filter","createEventEmitter","subscribers","emit","args","handled","forEach","subscriber","subscribe","includes","push","x","ko","mapping","require","dotnetify","_dotnetify","version","controller","_responseSubs","_connectedSubs","_responseVM","iVMId","iVMData","vmType","vmInstanceId","path","split","selector","i","element","checkServerSideException","data","UpdateVM","init","self","applyWidget","$","each","responseEvent","connectedEvent","setTimeout","offline","isConnected","isOffline","trigger","offlineTimeout","initHub","startHub","hub","stateChanged","state","debug","console","log","destroy","iParent","elems","find","addBack","toArray","widget","elem","getViewModels","map","VM","iElement","plugins","_create","VMType","attr","VMId","instanceId","parents","_ListenToOfflineEvent","_RequestVM","_GetOfflineVM","error","_destroy","OfflineFn","off","pluginId","plugin","$destroy","apply","hasOwnProperty","e","stack","disposeVM","fromJS","JSON","parse","$vmId","$element","$dotnetify","$vmOffline","observable","IsOffline","_AddBuiltInFunctions","$init","applyBindings","$serverUpdate","_OnComponentReady","$ready","_SubscribeObservables","offlineCacheFn","vmUpdate","_PreProcess","debugFn","$preventBinding","fn","$addList","iList","iNewItem","newItem","key","match","arrayFirst","replace","$updateList","Object","keys","isObservable","prop","$removeList","iCriteria","remove","$on","iProperty","iCallback","iNewValue","$once","subscription","dispose","$loadView","iTargetSelector","iViewUrl","iJsModuleUrl","iVmArg","iCallbackFn","empty","load","isEmptyObject","stringify","getScript","$inject","iContext","iObject","idx","item","_Inject","jsModule","jsInstance","assign","prototype","cachedData","warn","one","bind","pureComputed","$subscribe","retry","checkComponentReadyFn","isReady","components","grep","childElementCount","_OnValueChanged","iVMPath","update","extend","updateVM","iVMUpdate","exec","list","Error","vmArg","parseJSON","requestVM","iParam","property","charAt","isNaN","index","bindingHandlers","vmItemKey","preprocess","value","valueAccessor","allBindings","viewModel","bindingContext","items","get","vmCommand","vm","$root","fnName","fnArg","matchFnNameArg","toString","trim","matchFnName","outerHTML","getFn","unwrap","newValueAccessor","$parent","click","vmOnce","vmOn","once","dotnetifyVMRouter","router","routes","iPath","$dispatch","State","RoutingState","Active","iArg","preventDefault","currentTarget","pathname","pushState","hasRoutingState","Root","_absRoot","absRoot","VMRoot","root","templates","Templates","initRoot","urlPattern","template","UrlPattern","Id","mapUrl","toUrl","mapTo","urlPath","param","iParams","routeTo","activeUrl","routeUrl","raiseRoutedEvent","iRoute","equal","Path","iTarget","iJSModuleUrl","Target","ViewUrl","JSModuleUrl","iTemplate","force","TemplateId","RedirectRoot","redirectRoot","redirectRootPath","urlRedirect","absRootPath","Url","$template","pathToRoute","url","iDisableEvent","isRedirect","viewModels","vmOther","$router","VMArg","onRouteEnter","getElementById","redirect","loadView","dispatchActiveRoutingState","onRouteExit","call","$route","startsWith","routeElem","templateWrapper","routingStateWrapper","routingState","Origin","dotnetifyKoVMRouter","iVM","iDotNetifyRouter","callbackFn","vmElems","overrideUrl","defined","core","route","rescue","history","initial","title","supported","dispatch","fallback","location","hash","popState","initialPop","popped","href","URL","listen","onpopstate","parameterize","params","possible_routes","j","compare","result","undefined","partition","search","join","passed_route","previous_route","matched_route","current","previous","do_exit","run","documentMode","onhashchange","setInterval","action","do_enter","to","enter","fns","concat","exit","parts","options","re","text","halt_execution","dotnetifyRouter","iFn","iUrlPath","matched","iUrl","iState","iTitle","initRouting","vmRoute","d","exports","module","f","y","b","c","a","getType","l","n","t","g","E","z","L","ignore","h","include","copy","observe","mappedProperties","copiedProperties","arrayGetDistinctValues","F","k","unwrapObservable","isMapped","p","create","Function","G","dependentObservable","deferEvaluation","M","H","isWriteableObservable","read","arrayRemoveItem","arguments","write","computed","parent","skip","N","u","v","target","I","s","m","observableArray","mappedRemove","mappedRemoveAll","C","arrayIndexOf","mappedDestroy","mappedDestroyAll","mappedIndexOf","mappedCreate","sort","compareArrays","J","A","r","B","q","w","status","D","K","O","arrayChanged","arrayForEach","P","save","Q","R","arrayMap","T","S","pop","fromJSON","parseJson","updateFromJS","updateFromJSON","toJS","resetDefaultOptions","visitModel","toJSON","stringifyJson","defaultOptions","constructor","Date","visitedObjects","parentName","cleanData","_data","triggerHandler","o","Widget","expr","_createWidget","_proto","_childConstructors","isFunction","_super","_superApply","widgetEventPrefix","namespace","widgetName","widgetFullName","bridge","isPlainObject","jquery","pushStack","option","_init","defaultElement","disabled","uuid","eventNamespace","bindings","hoverable","focusable","_on","style","ownerDocument","defaultView","parentWindow","_getCreateOptions","_trigger","_getCreateEventData","noop","unbind","removeData","camelCase","removeAttr","removeClass","shift","_setOptions","_setOption","toggleClass","enable","disable","add","hasClass","guid","delegate","_off","undelegate","not","_delay","_hoverable","mouseenter","addClass","mouseleave","_focusable","focusin","focusout","type","originalEvent","isDefaultPrevented","show","hide","effect","duration","complete","delay","effects","easing","queue","jQueryDeferred","jQueryShim","on","iHandler","addEventListener","removeEventListener","events","handlers","splice","iArgs","arg","handler","request","XMLHttpRequest","open","onload","response","responseText","querySelector","innerHTML","send","abort","reason","support","cors","inArray","iItem","makeArray","merge","iArray1","iArray2","iObj","ajax","iOptions","onreadystatechange","readyState","_hasError","success","setRequestHeader","contentType","iSuccess","done","promise","Deferred","head","getElementsByTagName","script","createElement","src","removeChild","resolve","appendChild","jQuery","signalRNetCore","global","dotnetifyHub","iHubPath","iServerUrl","signalR","HubConnection","defineProperty","_connection","connection","connectionState","hubPath","reconnectDelay","reconnectRetry","_reconnectCount","_startDoneHandler","_startFailHandler","_disconnectedHandler","_stateChangedHandler","iNewState","_onDisconnected","_changeState","stateText","_startConnection","iHubOptions","iTransportArray","hubOptions","transport","HubConnectionBuilder","withUrl","build","client","response_VM","onclose","start","then","catch","transportOptions","webSockets","serverSentEvents","longPolling","fail","disconnected","reconnect","iStartHubFunc","server","dispose_VM","invoke","update_VM","request_VM","makeProxyCallback","callback","registerHubProxies","instance","shouldSubscribe","memberKey","memberValue","subscriptionMethod","hubName","hubConnection","createHubProxies","proxies","starting","_registerSubscribedHubs","createHubProxy","vmId","vmData","useDefaultPath","set","val","dotNetifyHub","connected","deferred","source","message","newState","hubServerUrl","connectionStateHandler","reconnectedEvent","connectionFailedEvent","isHubStarted","_hub","connect","react","hubLib","_triggerConnectionStateEvent","doneHandler","failHandler","ex","err","iExceptionHandler","exception","name","ExceptionType","Message","iException"],"mappings":"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AE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,YAAY;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;;AAEA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,oCAAoC;AAC9C;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;AC3MA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,MAAM;AACN,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C,KAAK;AACL;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;;AAEJ;;AAEA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA,UAAU,YAAY;AACtB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;A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","file":"dotnetify-ko.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"knockout\"), require(\"jquery\"), require(\"@aspnet/signalr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"knockout\", \"jquery\", \"@aspnet/signalr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dotnetify\"] = factory(require(\"knockout\"), require(\"jquery\"), require(\"@aspnet/signalr\"));\n\telse\n\t\troot[\"dotnetify\"] = factory(root[\"ko\"], root[\"jQuery\"], root[\"signalR\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__12__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/* \r\nCopyright 2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\n\r\nclass utils {\r\n  // Trim slashes from start and end of string.\r\n  trim(iStr) {\r\n    if (typeof iStr !== 'string') return '';\r\n\r\n    while (iStr.indexOf('/', iStr.length - 1) >= 0) iStr = iStr.substr(0, iStr.length - 1);\r\n    while (iStr.indexOf('/') == 0) iStr = iStr.substr(1, iStr.length - 1);\r\n    return iStr;\r\n  }\r\n\r\n  // Match two strings case-insensitive.\r\n  equal(iStr1, iStr2) {\r\n    return iStr1 != null && iStr2 != null && iStr1.toLowerCase() == iStr2.toLowerCase();\r\n  }\r\n\r\n  // Whether the string starts or ends with a value.\r\n  startsWith(iStr, iValue) {\r\n    return iStr.toLowerCase().slice(0, iValue.length) == iValue.toLowerCase();\r\n  }\r\n\r\n  endsWith(iStr, iValue) {\r\n    return iValue == '' || iStr.toLowerCase().slice(-iValue.length) == iValue.toLowerCase();\r\n  }\r\n\r\n  // Dispatch event with IE polyfill.\r\n  dispatchEvent(iEvent) {\r\n    if (typeof Event === 'function') window.dispatchEvent(new Event(iEvent));\r\n    else {\r\n      var event = document.createEvent('CustomEvent');\r\n      event.initEvent(iEvent, true, true);\r\n      window.dispatchEvent(event);\r\n    }\r\n  }\r\n\r\n  grep(iArray, iFilter) {\r\n    return Array.isArray(iArray) ? iArray.filter(iFilter) : [];\r\n  }\r\n}\r\n\r\nexport const createEventEmitter = _ => {\r\n  let subscribers = [];\r\n  return {\r\n    emit(...args) {\r\n      let handled = false;\r\n      subscribers.forEach(subscriber => {\r\n        handled = subscriber(...args) || handled;\r\n      });\r\n      return handled;\r\n    },\r\n\r\n    subscribe(subscriber) {\r\n      !subscribers.includes(subscriber) && subscribers.push(subscriber);\r\n      return () => (subscribers = subscribers.filter(x => x !== subscriber));\r\n    }\r\n  };\r\n};\r\n\r\nexport default new utils();\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/* \r\nCopyright 2015-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport _dotnetify from '../core/dotnetify';\r\nimport $ from 'jquery';\r\nimport './jquery-ui-widget';\r\nimport * as ko from 'knockout';\r\n\r\nko.mapping = require('./knockout.mapping-latest');\r\n\r\nlet dotnetify = window.dotnetify || _dotnetify;\r\n\r\ndotnetify.ko = {\r\n\tversion: '2.0.0',\r\n\tcontroller: dotnetify,\r\n\r\n\t// Internal variables.\r\n\t_responseSubs: null,\r\n\t_connectedSubs: null,\r\n\r\n\t_responseVM: function(iVMId, iVMData) {\r\n\t\t// Construct a selector from iVMId to find the associated widget.\r\n\t\t// First parse the instance Id out of the string, if present.\r\n\t\tvar vmType = iVMId;\r\n\t\tvar vmInstanceId = null;\r\n\t\tif (vmType.indexOf('$') >= 0) {\r\n\t\t\tvar path = iVMId.split('$');\r\n\t\t\tvmType = path[0];\r\n\t\t\tvmInstanceId = path[1];\r\n\t\t}\r\n\r\n\t\tvar selector = \"[data-vm='\" + vmType + \"']\";\r\n\r\n\t\t// If present, add the master view models to the selector.\r\n\t\tvar path = vmType.split('.');\r\n\t\tif (path.length > 1) {\r\n\t\t\tselector = '';\r\n\t\t\tlet i = 0;\r\n\t\t\tfor (i = 0; i < path.length - 1; i++) selector += \"[data-master-vm='\" + path[i] + \"'] \";\r\n\t\t\tselector += \"[data-vm='\" + path[i] + \"']\";\r\n\t\t}\r\n\r\n\t\t// If present, add the instance Id to the selector.\r\n\t\tif (vmInstanceId != null) selector += \"[data-vm-id='\" + vmInstanceId + \"']\";\r\n\r\n\t\t// Use the selector to locate the view model widget and pass the data.\r\n\t\tvar element = $(selector);\r\n\t\tif (element.length > 0) {\r\n\t\t\tdotnetify.checkServerSideException(iVMId, iVMData);\r\n\t\t\telement.data('ko-dotnetify').UpdateVM(iVMData);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tinit: function() {\r\n\t\tconst self = dotnetify.ko;\r\n\r\n\t\tvar applyWidget = function() {\r\n\t\t\t$.each($('[data-vm]'), function() {\r\n\t\t\t\t$(this).dotnetify();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (!self._responseSubs) self._responseSubs = dotnetify.responseEvent.subscribe(self._responseVM);\r\n\r\n\t\tif (!self._connectedSubs)\r\n\t\t\tself._connectedSubs = dotnetify.connectedEvent.subscribe(function() {\r\n\t\t\t\tapplyWidget();\r\n\t\t\t});\r\n\r\n\t\t// If offline mode is enabled, apply the widget anyway when there's no connection.\r\n\t\tsetTimeout(function() {\r\n\t\t\tif (dotnetify.offline && !dotnetify.isConnected()) {\r\n\t\t\t\tapplyWidget();\r\n\t\t\t\tdotnetify.isOffline = true;\r\n\t\t\t\t$(document).trigger('offline', dotnetify.isOffline);\r\n\t\t\t}\r\n\t\t}, dotnetify.offlineTimeout);\r\n\r\n\t\tdotnetify.initHub();\r\n\t\tdotnetify.startHub();\r\n\r\n\t\t// Use SignalR event to raise the offline event with true/false argument.\r\n\t\tdotnetify.hub.stateChanged(function(state) {\r\n\t\t\tif (dotnetify.debug) console.log('SignalR: ' + state);\r\n\r\n\t\t\tvar isOffline = state != 'connected';\r\n\t\t\tif (dotnetify.isOffline != isOffline) {\r\n\t\t\t\tdotnetify.isOffline = isOffline;\r\n\t\t\t\t$(document).trigger('offline', dotnetify.isOffline);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (dotnetify.offline) applyWidget();\r\n\t},\r\n\r\n\tdestroy: function(iParent) {\r\n\t\tconst elems = iParent ? $(iParent).find('[data-vm]').addBack(iParent) : $('[data-vm]');\r\n\t\telems.toArray().forEach(elem => {\r\n\t\t\tconst widget = dotnetify.ko.widget(elem);\r\n\t\t\tif (widget) widget.destroy();\r\n\t\t});\r\n\t},\r\n\r\n\t// Get all view models.\r\n\tgetViewModels: function() {\r\n\t\tconst self = dotnetify.ko;\r\n\t\tconst elems = $('[data-vm]').toArray();\r\n\t\treturn elems\r\n\t\t\t.map(elem => {\r\n\t\t\t\tconst widget = dotnetify.ko.widget(elem);\r\n\t\t\t\treturn widget ? widget.VM : null;\r\n\t\t\t})\r\n\t\t\t.filter(x => x);\r\n\t},\r\n\r\n\twidget: function(iElement) {\r\n\t\treturn $(iElement).data('ko-dotnetify');\r\n\t},\r\n\r\n\tplugins: {}\r\n};\r\n\r\n$(function() {\r\n\tdotnetify.ko.init();\r\n});\r\n\r\n$.widget('ko.dotnetify', {\r\n\t// Widget constructor.\r\n\t_create: function() {\r\n\t\tvar self = this;\r\n\r\n\t\tself.VMType = self.element.attr('data-vm');\r\n\t\tself.VMId = self.VMType;\r\n\r\n\t\t// If an instance Id is specified, add it to VMId.\r\n\t\tvar instanceId = self.element.attr('data-vm-id');\r\n\t\tif (instanceId != null) self.VMId += '$' + instanceId;\r\n\r\n\t\t// If inside master view scope, combine the names into VMId.\r\n\t\t$.each(self.element.parents('[data-master-vm]'), function() {\r\n\t\t\tself.VMId = $(this).attr('data-master-vm') + '.' + self.VMId;\r\n\t\t});\r\n\r\n\t\t// Handle offline mode.\r\n\t\tif (dotnetify.offline) self._ListenToOfflineEvent();\r\n\r\n\t\t// Request the server VM.\r\n\t\tif (self.VMId != null) {\r\n\t\t\tif (dotnetify.isConnected()) self._RequestVM();\r\n\t\t\telse if (dotnetify.offline) self._GetOfflineVM();\r\n\t\t} else console.error(\"ERROR: dotnetify - failed to find 'data-vm' attribute in the element where .dotnetify() was applied.\");\r\n\t},\r\n\r\n\t// Widget destructor.\r\n\t_destroy: function() {\r\n\t\ttry {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Stop listening to offline event.\r\n\t\t\tif (typeof self.OfflineFn === 'function') $(document).off('offline', self.OfflineFn);\r\n\r\n\t\t\t// Call any plugin's $destroy function if provided.\r\n\t\t\t$.each(dotnetify.plugins, function(pluginId, plugin) {\r\n\t\t\t\tif (typeof plugin['$destroy'] === 'function') plugin.$destroy.apply(self.VM);\r\n\t\t\t});\r\n\r\n\t\t\t// Call view model's $destroy function if provided.\r\n\t\t\tif (self.VM != null && self.VM.hasOwnProperty('$destroy')) self.VM.$destroy();\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.stack);\r\n\t\t}\r\n\r\n\t\tdotnetify.disposeVM(self.VMId);\r\n\t},\r\n\r\n\t// Convert the server VM into knockout VM.\r\n\tUpdateVM: function(iVMData) {\r\n\t\tvar self = this;\r\n\t\ttry {\r\n\t\t\t// If no view model yet, create one from the server data.\r\n\t\t\tif (self.VM == null) {\r\n\t\t\t\tself.VM = ko.mapping.fromJS(JSON.parse(iVMData));\r\n\r\n\t\t\t\t// Set essential info to the view model.\r\n\t\t\t\tself.VM.$vmId = self.VMId;\r\n\t\t\t\tself.VM.$element = self.element;\r\n\t\t\t\tself.VM.$dotnetify = dotnetify.ko;\r\n\r\n\t\t\t\t// Add an observable to carry the offline state.\r\n\t\t\t\tif (dotnetify.offline) self.VM.$vmOffline = ko.observable(self.IsOffline);\r\n\r\n\t\t\t\t// Add built-in functions to the view model.\r\n\t\t\t\tthis._AddBuiltInFunctions();\r\n\r\n\t\t\t\t// Call any plugin's $init function if provided to give a chance to do\r\n\t\t\t\t// things before initial binding is applied.\r\n\t\t\t\t$.each(dotnetify.ko.plugins, function(pluginId, plugin) {\r\n\t\t\t\t\tif (typeof plugin['$init'] === 'function') plugin.$init.apply(self.VM);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Call view model's init function if provided.\r\n\t\t\t\tif (typeof self.VM['$init'] === 'function') self.VM.$init();\r\n\r\n\t\t\t\t// Apply knockout view model to the HTML element.\r\n\t\t\t\ttry {\r\n\t\t\t\t\tko.applyBindings(self.VM, self.element[0]);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e.stack);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Enable server update so that every changed value goes to server.\r\n\t\t\t\tself.VM.$serverUpdate = true;\r\n\r\n\t\t\t\t// Raise the ready event after all knockout components are ready.\r\n\t\t\t\tself._OnComponentReady(function() {\r\n\t\t\t\t\t// Call any plugin's $ready function if provided to give a chance to do\r\n\t\t\t\t\t// things when the view model is ready.\r\n\t\t\t\t\t$.each(dotnetify.ko.plugins, function(pluginId, plugin) {\r\n\t\t\t\t\t\tif (typeof plugin['$ready'] === 'function') plugin.$ready.apply(self.VM);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Subscribe to change events to allow sending updates back to server.\r\n\t\t\t\t\tself._SubscribeObservables(self.VM);\r\n\r\n\t\t\t\t\t// Call view model's $ready function if provided.\r\n\t\t\t\t\tif (typeof self.VM['$ready'] === 'function') self.VM.$ready();\r\n\r\n\t\t\t\t\t// Send 'ready' event after a new view model was received.\r\n\t\t\t\t\tself.element.trigger('ready', { VMId: self.VMId, VM: self.VM });\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Cache the VM data in case of offline mode.\r\n\t\t\t\tif (dotnetify.offline && dotnetify.isConnected() && typeof dotnetify.offlineCacheFn === 'function')\r\n\t\t\t\t\tdotnetify.offlineCacheFn(self.VMId + self.element.attr('data-vm-arg'), iVMData);\r\n\t\t\t} else {\r\n\t\t\t\t// Disable server update because we're going to update the value in the knockout VM\r\n\t\t\t\t// and that will trigger change event back to server if we don't stop it now.\r\n\t\t\t\tself.VM.$serverUpdate = false;\r\n\r\n\t\t\t\tvar vmUpdate = JSON.parse(iVMData);\r\n\t\t\t\tself._PreProcess(vmUpdate);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tko.mapping.fromJS(vmUpdate, self.VM);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e.stack);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Don't forget to re-enable sending changed values to server.\r\n\t\t\t\tself.VM.$serverUpdate = true;\r\n\r\n\t\t\t\t// Subscribe to change events to allow sending updates back to server,\r\n\t\t\t\t// but do it after all the knockout components are ready.\r\n\t\t\t\tself._OnComponentReady(function() {\r\n\t\t\t\t\tself._SubscribeObservables(self.VM);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.stack);\r\n\t\t}\r\n\r\n\t\tif (dotnetify.debug) {\r\n\t\t\tconsole.log('[' + self.VMId + '] received> ');\r\n\t\t\tconsole.log(JSON.parse(iVMData));\r\n\r\n\t\t\tif (dotnetify.debugFn != null) dotnetify.debugFn(self.VMId, 'received', JSON.parse(iVMData));\r\n\t\t}\r\n\t},\r\n\r\n\t// Adds built-in functions to the view model.\r\n\t_AddBuiltInFunctions: function() {\r\n\t\tvar self = this;\r\n\r\n\t\t// Executes the given function in a scope where server update is temporarily disabled.\r\n\t\tself.VM.$preventBinding = function(fn) {\r\n\t\t\tself.VM.$serverUpdate = false;\r\n\t\t\tfn.apply(self.VM);\r\n\t\t\tself.VM.$serverUpdate = true;\r\n\t\t};\r\n\r\n\t\t// Adds a new item to an observable array.\r\n\t\tself.VM.$addList = function(iList, iNewItem) {\r\n\t\t\tconst newItem = Array.isArray(iNewItem) ? iNewItem : ko.mapping.fromJS(iNewItem);\r\n\r\n\t\t\t// Check if the list already has an item with the same key. If so, replace it.\r\n\t\t\tvar key = iList()['$vmKey'];\r\n\t\t\tif (key != null) {\r\n\t\t\t\tvar match = ko.utils.arrayFirst(iList(), function(i) {\r\n\t\t\t\t\treturn i[key]() == newItem[key]();\r\n\t\t\t\t});\r\n\t\t\t\tif (match != null) {\r\n\t\t\t\t\tiList.replace(match, newItem);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tiList.push(newItem);\r\n\t\t};\r\n\r\n\t\t// Updates existing item to an observable array.\r\n\t\tself.VM.$updateList = function(iList, iNewItem) {\r\n\t\t\tvar newItem = ko.mapping.fromJS(iNewItem);\r\n\r\n\t\t\t// Check if the list already has an item with the same key. If so, update it.\r\n\t\t\tvar key = iList()['$vmKey'];\r\n\t\t\tif (key != null) {\r\n\t\t\t\tif (!newItem.hasOwnProperty(key)) {\r\n\t\t\t\t\tconsole.error(\"ERROR: object requires property '\" + key + \"'\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar match = ko.utils.arrayFirst(iList(), function(i) {\r\n\t\t\t\t\treturn i[key]() == newItem[key]();\r\n\t\t\t\t});\r\n\t\t\t\tif (match != null) {\r\n\t\t\t\t\tObject.keys(newItem).forEach(prop => {\r\n\t\t\t\t\t\tif (ko.isObservable(newItem[prop])) match[prop](newItem[prop]());\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tiList.push(newItem);\r\n\t\t};\r\n\r\n\t\t// Removes an item from an observable array.\r\n\t\t// Unlike the push operation, the ko remove operation will cause the list to trigger\r\n\t\t// change event, therefore disable server update while we do this.\r\n\t\tself.VM.$removeList = function(iList, iCriteria) {\r\n\t\t\tself.VM.$preventBinding(function() {\r\n\t\t\t\tiList.remove(iCriteria);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Listens to a view model property change event.\r\n\t\tself.VM.$on = function(iProperty, iCallback) {\r\n\t\t\tiProperty.subscribe(function(iNewValue) {\r\n\t\t\t\tiCallback(iNewValue);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Listens to a view model property change event once.\r\n\t\tself.VM.$once = function(iProperty, iCallback) {\r\n\t\t\tvar subscription = iProperty.subscribe(function(iNewValue) {\r\n\t\t\t\tsubscription.dispose();\r\n\t\t\t\tiCallback(iNewValue);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Loads a view into a target element.\r\n\t\t// Method parameters: TargetSelector, ViewUrl, [iJsModuleUrl], [iVmArg], iCallbackFn\r\n\t\tself.VM.$loadView = function(iTargetSelector, iViewUrl, iJsModuleUrl, iVmArg, iCallbackFn) {\r\n\t\t\tif (typeof iJsModuleUrl === 'object' && iJsModuleUrl != null) {\r\n\t\t\t\tiCallbackFn = iVmArg;\r\n\t\t\t\tiVmArg = iJsModuleUrl;\r\n\t\t\t\tiJsModuleUrl = null;\r\n\t\t\t} else if (typeof iJsModuleUrl === 'function') {\r\n\t\t\t\tiCallbackFn = iJsModuleUrl;\r\n\t\t\t\tiJsModuleUrl = null;\r\n\t\t\t} else if (typeof iVmArg === 'function') {\r\n\t\t\t\tiCallbackFn = iVmArg;\r\n\t\t\t\tiVmArg = null;\r\n\t\t\t}\r\n\r\n\t\t\t// If no view URL is given, empty the target DOM element.\r\n\t\t\tif (iViewUrl == null || iViewUrl == '') {\r\n\t\t\t\t$(iTargetSelector).empty();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Loads the view template to the target DOM element.\r\n\t\t\t$(iTargetSelector).load(iViewUrl, null, function() {\r\n\t\t\t\t// Adds view model arguments when provided.\r\n\t\t\t\tif (iVmArg != null && !$.isEmptyObject(iVmArg)) $(this).attr('data-vm-arg', JSON.stringify(iVmArg));\r\n\r\n\t\t\t\t// Call the callback function.\r\n\t\t\t\tif (typeof iCallbackFn === 'function') iCallbackFn.apply(this);\r\n\r\n\t\t\t\t// Load the Javascript module if specified.\r\n\t\t\t\tif (iJsModuleUrl != null) {\r\n\t\t\t\t\t$.getScript(iJsModuleUrl, function() {\r\n\t\t\t\t\t\tdotnetify.ko.init();\r\n\t\t\t\t\t});\r\n\t\t\t\t} else dotnetify.ko.init();\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Injects a context with observables mapped from an object. Context can be an object or an observable array.\r\n\t\tself.VM.$inject = function(iContext, iObject) {\r\n\t\t\tif (ko.isObservable(iContext) && 'push' in iContext)\r\n\t\t\t\t$.each(iContext(), function(idx, item) {\r\n\t\t\t\t\tself._Inject(item, iObject);\r\n\t\t\t\t});\r\n\t\t\telse self._Inject(iContext, iObject);\r\n\t\t};\r\n\r\n\t\t// Map the module in global namespace whose name matches the view model type.\r\n\t\tvar jsModule = window[self.VMType];\r\n\t\tif (jsModule != null) {\r\n\t\t\t// If the module is a Typescript class, instantiate it.\r\n\t\t\tif (typeof jsModule === 'function') {\r\n\t\t\t\tlet jsInstance = new jsModule(self.VM);\r\n\t\t\t\tObject.assign(jsInstance, jsModule.prototype);\r\n\t\t\t\tself._Inject(self.VM, jsInstance);\r\n\t\t\t} else self._Inject(self.VM, jsModule);\r\n\t\t}\r\n\r\n\t\t// Add plugin functions.\r\n\t\t$.each(dotnetify.ko.plugins, function(pluginId, plugin) {\r\n\t\t\tif (plugin.hasOwnProperty('$inject')) plugin.$inject(self.VM);\r\n\t\t});\r\n\t},\r\n\r\n\t// Gets offline view model data from the local cache.\r\n\t_GetOfflineVM: function() {\r\n\t\tvar self = this;\r\n\r\n\t\tif (typeof dotnetify.offlineCacheFn === 'function') {\r\n\t\t\t// SignalR connection isn't available; use cached VM data for offline mode.\r\n\t\t\tvar cachedData = dotnetify.offlineCacheFn(self.VMId + self.element.attr('data-vm-arg'));\r\n\t\t\tif (cachedData == null) cachedData = dotnetify.offlineCacheFn(self.VMId);\r\n\r\n\t\t\tif (cachedData != null) {\r\n\t\t\t\tif (dotnetify.debug) console.warn('[' + self.VMId + '] using offline data');\r\n\r\n\t\t\t\tself.IsOffline = true;\r\n\t\t\t\tself.UpdateVM(cachedData);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Initializes offline mode handling.\r\n\t_ListenToOfflineEvent: function() {\r\n\t\tvar self = this;\r\n\r\n\t\tself.IsOffline = false;\r\n\t\tself.OfflineFn = function(event, isOffline) {\r\n\t\t\tif (self.VM != null && self.VM.hasOwnProperty('$vmOffline')) self.VM.$vmOffline(isOffline);\r\n\r\n\t\t\tself.IsOffline = isOffline;\r\n\t\t\tif (!isOffline) self._RequestVM();\r\n\t\t\telse if (self.VM == null) self._GetOfflineVM();\r\n\r\n\t\t\t$(document).one('offline', self.OfflineFn.bind(self));\r\n\t\t};\r\n\r\n\t\t$(document).one('offline', self.OfflineFn.bind(self));\r\n\t},\r\n\r\n\t// Inject the context with observables mapped from an object.\r\n\t// Properties that start with underscore are mapped to observables.\r\n\t// Functions that start with underscore are mapped to pure computed observables.\r\n\t_Inject: function(iContext, iObject) {\r\n\t\tObject.keys(iObject).forEach(prop => {\r\n\t\t\t// Skip if the context already has a property with the same name.\r\n\t\t\tif (iContext.hasOwnProperty(prop)) return;\r\n\r\n\t\t\tif (typeof iObject[prop] === 'function') {\r\n\t\t\t\tif (prop.indexOf('_') == 0) {\r\n\t\t\t\t\tiContext[prop] = ko.pureComputed(iObject[prop], iContext);\r\n\t\t\t\t} else iContext[prop] = iObject[prop];\r\n\t\t\t} else if (prop.indexOf('_') == 0) {\r\n\t\t\t\tiContext[prop] = ko.observable(iObject[prop]);\r\n\r\n\t\t\t\t// Prevent it from being subscribed so it won't get sent to server.\r\n\t\t\t\tiContext[prop].$subscribe = true;\r\n\t\t\t} else iContext[prop] = iObject[prop];\r\n\t\t});\r\n\t},\r\n\r\n\t// Calls the callback function only if all the knockout components are ready.\r\n\t// This is a workaround until knockout issue #1533 is closed.\r\n\t_OnComponentReady: function(iCallbackFn) {\r\n\t\tvar self = this;\r\n\t\tvar retry = 0;\r\n\t\tvar checkComponentReadyFn = function() {\r\n\t\t\tvar isReady = true;\r\n\r\n\t\t\t// Assume the knockout components are those with 'params' attribute,\r\n\t\t\t// and that it's ready if it has at least one child element.\r\n\t\t\tvar components = self.element.find('[params]');\r\n\t\t\tif (components.length > 0)\r\n\t\t\t\tisReady =\r\n\t\t\t\t\t$.grep(components, function(i) {\r\n\t\t\t\t\t\treturn i.childElementCount == 0;\r\n\t\t\t\t\t}).length == 0;\r\n\r\n\t\t\tif (isReady || retry++ > 3) iCallbackFn();\r\n\t\t\telse setTimeout(checkComponentReadyFn, 250);\r\n\t\t};\r\n\r\n\t\tcheckComponentReadyFn();\r\n\t},\r\n\r\n\t// On value changed from a knockout VM's observable, update the server VM.\r\n\t_OnValueChanged: function(iVMPath, iNewValue) {\r\n\t\tvar update = {};\r\n\t\tupdate[iVMPath] = iNewValue instanceof Object ? $.extend({}, iNewValue) : iNewValue;\r\n\r\n\t\tif (dotnetify.isConnected()) {\r\n\t\t\ttry {\r\n\t\t\t\tdotnetify.updateVM(this.VMId, update);\r\n\r\n\t\t\t\tif (dotnetify.debug) {\r\n\t\t\t\t\tconsole.log('[' + this.VMId + '] sent> ');\r\n\t\t\t\t\tconsole.log(update);\r\n\r\n\t\t\t\t\tif (dotnetify.debugFn != null) dotnetify.debugFn(this.VMId, 'sent', update);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Preprocess view model update from the server before we map it to knockout view model.\r\n\t_PreProcess: function(iVMUpdate) {\r\n\t\tObject.keys(iVMUpdate).forEach(prop => {\r\n\t\t\t// Look for property that end with '_add'. Interpret the value as a list item to be added\r\n\t\t\t// to an existing list whose property name precedes that suffix.\r\n\t\t\tvar match = /(.*)_add/.exec(prop);\r\n\t\t\tif (match != null) {\r\n\t\t\t\tvar list = this.VM[match[1]];\r\n\t\t\t\tif (list != null) this.VM.$addList(list, iVMUpdate[prop]);\r\n\t\t\t\telse throw new Error('unable to resolve ' + prop);\r\n\t\t\t\tdelete iVMUpdate[prop];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Look for property that end with '_update'. Interpret the value as a list item to be updated\r\n\t\t\t// to an existing list whose property name precedes that suffix.\r\n\t\t\tvar match = /(.*)_update/.exec(prop);\r\n\t\t\tif (match != null) {\r\n\t\t\t\tvar list = this.VM[match[1]];\r\n\t\t\t\tif (list != null) this.VM.$updateList(list, iVMUpdate[prop]);\r\n\t\t\t\telse throw new Error('unable to resolve ' + prop);\r\n\t\t\t\tdelete iVMUpdate[prop];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Look for property that end with '_remove'. Interpret the value as a list item key to remove\r\n\t\t\t// from an existing list whose property name precedes that suffix.\r\n\t\t\tvar match = /(.*)_remove/.exec(prop);\r\n\t\t\tif (match != null) {\r\n\t\t\t\tvar list = this.VM[match[1]];\r\n\t\t\t\tif (list != null) {\r\n\t\t\t\t\tvar key = list()['$vmKey'];\r\n\t\t\t\t\tif (key != null)\r\n\t\t\t\t\t\tthis.VM.$removeList(this.VM[match[1]], function(i) {\r\n\t\t\t\t\t\t\treturn i[key]() == iVMUpdate[prop];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\telse throw new Error('unable to resolve ' + prop + ' due to missing vmItemKey attribute');\r\n\t\t\t\t} else throw new Error('unable to resolve ' + prop);\r\n\t\t\t\tdelete iVMUpdate[prop];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t// Requests view model data from the server.\r\n\t_RequestVM: function() {\r\n\t\tvar self = this;\r\n\t\tvar vmArg = self.element.attr('data-vm-arg');\r\n\t\tvmArg = vmArg != null ? $.parseJSON(vmArg.replace(/'/g, '\"')) : null;\r\n\r\n\t\tif (dotnetify.isConnected()) {\r\n\t\t\ttry {\r\n\t\t\t\tdotnetify.requestVM(self.VMId, vmArg);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Subscribe to value change events raised by knockout VM's observables.\r\n\t_SubscribeObservables: function(iParam, iVMPath) {\r\n\t\tvar self = this;\r\n\r\n\t\tif (iParam == null) return;\r\n\t\telse if (ko.isObservable(iParam)) {\r\n\t\t\tif ('$subscribe' in iParam === false) {\r\n\t\t\t\tiParam.subscribe(function(iNewValue) {\r\n\t\t\t\t\t// Handle value change event from observables.\r\n\t\t\t\t\tif (self.VM.$serverUpdate === true) self._OnValueChanged(iVMPath, iNewValue);\r\n\t\t\t\t});\r\n\t\t\t\tiParam['$subscribe'] = true;\r\n\t\t\t}\r\n\t\t\tthis._SubscribeObservables(iParam(), iVMPath);\r\n\t\t} else if (typeof iParam == 'object') {\r\n\t\t\t// The property with $vmKey means it's an enumerable and the $vmKey indicates the key to identify\r\n\t\t\t// the item in that enumerable.  When we send value update to the server, we'll use the property\r\n\t\t\t// path in this format: <enumerable property name>.$<key value>.<property name>.\r\n\t\t\t// For example: ListContent.$3.FirstName.\r\n\t\t\tvar key = '$vmKey' in iParam ? iParam['$vmKey'] : null;\r\n\r\n\t\t\tObject.keys(iParam).forEach(property => {\r\n\t\t\t\tif (property.charAt(0) == '$' || property.charAt(0) == '_') return;\r\n\t\t\t\tif (property.charAt(0) == property.charAt(0).toLowerCase()) return;\r\n\t\t\t\tif (!isNaN(property.charAt(0))) return;\r\n\t\t\t\tconst path = key != null ? '$' + iParam[property][key]() : property;\r\n\t\t\t\tthis._SubscribeObservables(iParam[property], iVMPath == null ? path : iVMPath + '.' + path);\r\n\t\t\t});\r\n\t\t} else if (iParam instanceof Array) {\r\n\t\t\tObject.keys(iParam).forEach(index => {\r\n\t\t\t\tpath = '$' + index;\r\n\t\t\t\tthis._SubscribeObservables(iParam[index], iVMPath == null ? path : iVMPath + '.' + path);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// Custom knockout binding to indicate the item key of an items collection property.\r\nko.bindingHandlers.vmItemKey = {\r\n\tpreprocess: function(value) {\r\n\t\t// Make sure the item key is enclosed with quotes.\r\n\t\treturn value.charAt(0) != \"'\" ? \"'\" + value + \"'\" : value;\r\n\t},\r\n\tupdate: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n\t\tvar value = valueAccessor();\r\n\t\tvar items = allBindings.get('foreach');\r\n\r\n\t\t// Test whether the foreach value is object literal where items is set to 'data' property.\r\n\t\tif (!ko.isObservable(items) && items.hasOwnProperty('data')) items = items.data;\r\n\r\n\t\t// Store the item key in a special property '$vmKey' in the element's view model.\r\n\t\tif (ko.isObservable(items) && items() != null && value != null) items()['$vmKey'] = value;\r\n\t}\r\n};\r\n\r\n// Custom knockout binding to bind the specified function the click event of the element.\r\nko.bindingHandlers.vmCommand = {\r\n\tinit: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n\t\tvar vm = bindingContext.$root;\r\n\t\tvar fnName = null;\r\n\t\tvar fnArg = null;\r\n\r\n\t\t// Parse the value. It supports either a function name or an object literal { funcName: argument }\r\n\t\t// where argument can be either data or obsevables.\r\n\t\tvar matchFnNameArg = /return\\s{(.*):(.*)}\\s/.exec(valueAccessor.toString());\r\n\t\tif (matchFnNameArg != null) {\r\n\t\t\tfnName = matchFnNameArg[1].trim();\r\n\t\t\tfnArg = matchFnNameArg[2].trim();\r\n\t\t} else {\r\n\t\t\tvar matchFnName = /return\\s(.*)\\s/.exec(valueAccessor.toString());\r\n\t\t\tif (matchFnName != null) fnName = matchFnName[1].trim();\r\n\t\t}\r\n\r\n\t\tif (fnName == null) throw new Error('invalid vmCommand value at ' + element.outerHTML);\r\n\r\n\t\t// Support whether function is defined globally or inside a namespace that matches view model Id.\r\n\t\tvar getFn = function() {\r\n\t\t\treturn vm[fnName] != null ? vm[fnName] : valueAccessor();\r\n\t\t};\r\n\r\n\t\t// Trim the argument from enclosing quotes.  If it's an observable name, replace it with the value.\r\n\t\tif (fnArg != null) {\r\n\t\t\tif (fnArg.charAt(0) == \"'\") fnArg = fnArg.replace(/(^'|'$)/g, '');\r\n\t\t\telse if (ko.isObservable(viewModel[fnArg])) fnArg = ko.unwrap(viewModel[fnArg]);\r\n\t\t\telse if (fnArg == '$data') fnArg = viewModel;\r\n\t\t} else fnArg = true;\r\n\r\n\t\tvar newValueAccessor = function() {\r\n\t\t\treturn function() {\r\n\t\t\t\tvar fn = getFn();\r\n\r\n\t\t\t\t// If function is an observable, which means it's a server view model property, then set its value to\r\n\t\t\t\t// trigger the invocation of its setter property on the server side.  If it's not an observable, then it must\r\n\t\t\t\t// be a client-side function, in which case just invoke it and pass all possible objects it may need.\r\n\t\t\t\tif (ko.isObservable(fn)) {\r\n\t\t\t\t\t// Reset the value locally first to ensure that setting the value will raise change events.\r\n\t\t\t\t\tvm.$preventBinding(function() {\r\n\t\t\t\t\t\tfn(fnArg === true ? false : null);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tfn(fnArg);\r\n\t\t\t\t} else fn.apply(vm, [ viewModel, element, bindingContext.$parent ]);\r\n\t\t\t};\r\n\t\t};\r\n\t\tko.bindingHandlers.click.init(element, newValueAccessor, allBindings, viewModel, bindingContext);\r\n\t}\r\n};\r\n\r\n// Custom knockout binding to call a function on initial property change event.\r\nko.bindingHandlers.vmOnce = {\r\n\tinit: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n\t\tko.bindingHandlers.vmOn.init(element, valueAccessor, allBindings, viewModel, bindingContext, true);\r\n\t}\r\n};\r\n\r\n// Custom knockout binding to call a function on a property change event.\r\nko.bindingHandlers.vmOn = {\r\n\tinit: function(element, valueAccessor, allBindings, viewModel, bindingContext, once) {\r\n\t\tvar vm = bindingContext.$root;\r\n\t\tvar property = null;\r\n\t\tvar fnName = null;\r\n\t\tvar value = valueAccessor.toString();\r\n\r\n\t\t// Parse the value, which should be in object literal { property: fnName }.\r\n\t\tvar match = /return\\s{(.*):(.*)}\\s/.exec(value);\r\n\t\tif (match != null) {\r\n\t\t\tproperty = match[1].trim();\r\n\t\t\tfnName = match[2].trim();\r\n\t\t}\r\n\r\n\t\tif (fnName == null) throw new Error('invalid vmOn function at ' + element.outerHTML);\r\n\r\n\t\t// Support whether function is defined globally or inside a namespace that matches view model Id.\r\n\t\tvar getFn = function() {\r\n\t\t\treturn vm[fnName] != null ? vm[fnName] : valueAccessor()[property];\r\n\t\t};\r\n\r\n\t\t// Make sure the property is an observable.\r\n\t\tif (property != null && !ko.isObservable(viewModel[property])) throw new Error('invalid vmOn data: ' + valueAccessor());\r\n\r\n\t\t// Call the function with the initial data.\r\n\t\tgetFn().apply(vm, [ viewModel, element, bindingContext.$parent ]);\r\n\r\n\t\t// Call the function on every data update.\r\n\t\tif (once == null)\r\n\t\t\tviewModel[property].subscribe(function(iNewValue) {\r\n\t\t\t\tgetFn().apply(vm, [ viewModel, element, bindingContext.$parent ]);\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\nexport default dotnetify;\r\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport utils from '../libs/utils';\r\n\r\nexport default class dotnetifyVMRouter {\r\n  routes = [];\r\n\r\n  get RoutingState() {\r\n    throw new Error('Not implemented');\r\n  }\r\n  get VMRoot() {\r\n    throw new Error('Not implemented');\r\n  }\r\n  get VMArg() {\r\n    throw new Error('Not implemented');\r\n  }\r\n\r\n  constructor(vm, router) {\r\n    this.vm = vm;\r\n    this.router = router;\r\n    this.debug = vm.$dotnetify.controller.debug;\r\n  }\r\n\r\n  // Dispatch the active routing state to the server.\r\n  dispatchActiveRoutingState(iPath) {\r\n    this.vm.$dispatch({ 'RoutingState.Active': iPath });\r\n    let { RoutingState } = this.vm.State();\r\n    RoutingState = Object.assign(RoutingState || {}, { Active: iPath });\r\n    this.vm.State({ RoutingState });\r\n  }\r\n\r\n  // Handles click event from anchor tags.  Argument can be event object or path string.\r\n  handleRoute(iArg) {\r\n    let path = null;\r\n    if (typeof iArg === 'object') {\r\n      iArg.preventDefault();\r\n      path = iArg.currentTarget.pathname;\r\n    }\r\n    else if (typeof iArg === 'string') path = iArg;\r\n\r\n    if (path == null || path == '') throw new Error('$handleRoute requires path argument or event with pathname.');\r\n    setTimeout(() => this.router.pushState({}, '', path));\r\n  }\r\n\r\n  // Build the absolute root path from the \"vmRoot\" property on React component.\r\n  initRoot() {\r\n    if (!this.hasRoutingState || this.RoutingState === null || this.RoutingState.Root === null) return;\r\n\r\n    if (this._absRoot != this.RoutingState.Root) {\r\n      var absRoot = utils.trim(this.VMRoot);\r\n      if (absRoot != '') absRoot = '/' + absRoot;\r\n      var root = utils.trim(this.RoutingState.Root);\r\n      this._absRoot = root != '' ? absRoot + '/' + root : absRoot;\r\n      this.RoutingState.Root = this._absRoot;\r\n    }\r\n  }\r\n\r\n  // Initialize routing templates if the view model implements IRoutable.\r\n  initRouting() {\r\n    const vm = this.vm;\r\n    if (!this.hasRoutingState) return;\r\n\r\n    if (this.RoutingState === null) {\r\n      console.error(\"router> the RoutingState prop of '\" + vm.$vmId + \"' was not initialized.\");\r\n      return;\r\n    }\r\n\r\n    var templates = this.RoutingState.Templates;\r\n    if (templates == null || templates.length == 0) return;\r\n\r\n    // Initialize the router.\r\n    if (!this.router.$init) {\r\n      this.router.init();\r\n      this.router.$init = true;\r\n    }\r\n\r\n    // Build the absolute root path.\r\n    this.initRoot();\r\n\r\n    templates.forEach(template => {\r\n      // If url pattern isn't given, consider Id as the pattern.\r\n      var urlPattern = template.UrlPattern != null ? template.UrlPattern : template.Id;\r\n      urlPattern = urlPattern != '' ? urlPattern : '/';\r\n      var mapUrl = this.toUrl(urlPattern);\r\n\r\n      if (this.debug) console.log('router> map ' + mapUrl + ' to template id=' + template.Id);\r\n\r\n      this.router.mapTo(mapUrl, iParams => {\r\n        this.router.urlPath = '';\r\n\r\n        // Construct the path from the template pattern and the params passed by PathJS.\r\n        var path = urlPattern;\r\n        for (var param in iParams) path = path.replace(':' + param, iParams[param]);\r\n        path = path.replace(/\\(\\/:([^)]+)\\)/g, '').replace(/\\(|\\)/g, '');\r\n\r\n        this.routeTo(path, template);\r\n      });\r\n    });\r\n\r\n    // Route initial URL.\r\n    var activeUrl = this.toUrl(this.RoutingState.Active);\r\n    if (this.router.urlPath == '') this.router.urlPath = activeUrl;\r\n    if (!this.routeUrl())\r\n      // If routing ends incomplete, raise routed event anyway.\r\n      this.raiseRoutedEvent(true);\r\n  }\r\n\r\n  // Whether a route is active.\r\n  isActive(iRoute) {\r\n    if (iRoute != null && iRoute.hasOwnProperty('Path')) {\r\n      return utils.equal(iRoute.Path, this.RoutingState.Active);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Loads a view into a target element.\r\n  loadView(iTargetSelector, iViewUrl, iJsModuleUrl, iVmArg, iCallbackFn) {\r\n    throw new Error('Not implemented');\r\n  }\r\n\r\n  // Routes to a path.\r\n  manualRouteTo(iPath, iTarget, iViewUrl, iJSModuleUrl) {\r\n    const vm = this.vm;\r\n    var template = { Id: 'manual', Target: iTarget, ViewUrl: iViewUrl, JSModuleUrl: iJSModuleUrl };\r\n    this.routeTo(iPath, template, true);\r\n  }\r\n\r\n  // Handles route enter event.\r\n  onRouteEnter(iPath, iTemplate) {\r\n    return true;\r\n  }\r\n\r\n  // Raise event indicating the routing process has ended.\r\n  raiseRoutedEvent(force) {\r\n    const vm = this.vm;\r\n    if (this.router.urlPath == '' || force == true) {\r\n      if (this.debug) console.log('router> routed');\r\n      utils.dispatchEvent('dotnetify.routed');\r\n    }\r\n  }\r\n\r\n  // Returns the URL for an anchor tag.\r\n  route(iRoute, iTarget) {\r\n    // No route to process. Return silently.\r\n    if (iRoute == null) return;\r\n\r\n    if (!iRoute.hasOwnProperty('Path') || !iRoute.hasOwnProperty('TemplateId')) throw new Error('Not a valid route');\r\n\r\n    // Build the absolute root path.\r\n    this.initRoot();\r\n\r\n    // If the route path is not defined, use the URL pattern from the associated template.\r\n    // This is so that we don't send the same data twice if both are equal.\r\n    var path = iRoute.Path;\r\n    var template = null;\r\n    if (this.hasRoutingState && this.RoutingState.Templates != null) {\r\n      var match = this.RoutingState.Templates.filter(function(iTemplate) {\r\n        return iTemplate.Id == iRoute.TemplateId;\r\n      });\r\n      if (match.length > 0) {\r\n        template = match[0];\r\n\r\n        if (typeof iTarget === 'string') template.Target = iTarget;\r\n\r\n        if (path == null) {\r\n          path = template.UrlPattern != null ? template.UrlPattern : template.Id;\r\n          iRoute.Path = path;\r\n        }\r\n      }\r\n      else if (iRoute.RedirectRoot == null) throw new Error(\"vmRoute cannot find route template '\" + iRoute.TemplateId);\r\n    }\r\n\r\n    // If the path has a redirect root, the path doesn't belong to the current root and needs to be\r\n    // redirected to a different one.  Set the absolute path to the HREF attribute, and prevent the\r\n    // default behavior of the anchor click event and instead do push to HTML5 history state, which\r\n    // would attempt to resolve the path first before resorting to hard browser redirect.\r\n    if (iRoute.RedirectRoot != null) {\r\n      // Combine the redirect root with the view model's root.\r\n      var redirectRoot = iRoute.RedirectRoot;\r\n      if (redirectRoot.charAt(0) == '/') redirectRoot = redirectRoot.substr(0, redirectRoot.length - 1);\r\n      var redirectRootPath = iRoute.RedirectRoot.split('/');\r\n\r\n      var urlRedirect = '';\r\n      var absRoot = this.VMRoot;\r\n      if (absRoot != null) {\r\n        var absRootPath = absRoot.split('/');\r\n        for (var i = 0; i < absRootPath.length; i++) {\r\n          if (absRootPath[i] != '' && absRootPath[i] == redirectRootPath[0]) break;\r\n          urlRedirect += absRootPath[i] + '/';\r\n        }\r\n      }\r\n      urlRedirect += redirectRoot + '/' + path;\r\n      this.routes.push({ Path: path, Url: urlRedirect });\r\n      return urlRedirect;\r\n    }\r\n\r\n    // For quick lookup, save the mapping between the path to the route inside the view model.\r\n    if (template == null) throw new Error('vmRoute cannot find any route template');\r\n\r\n    iRoute.$template = template;\r\n    this.pathToRoute = this.pathToRoute || {};\r\n    this.pathToRoute[path] = iRoute;\r\n\r\n    // Set the absolute path to the HREF attribute, and prevent the default behavior of\r\n    // the anchor click event and instead do push to HTML5 history state.\r\n    let url = this.toUrl(path);\r\n    url = url.length > 0 ? url : '/';\r\n    this.routes.push({ Path: path, Url: url });\r\n    return url;\r\n  }\r\n\r\n  // Routes to a path.\r\n  routeTo(iPath, iTemplate, iDisableEvent, iCallbackFn, isRedirect) {\r\n    const vm = this.vm;\r\n    const viewModels = vm.$dotnetify.getViewModels();\r\n\r\n    if (this.debug) console.log(\"router> route '\" + iPath + \"' to template id=\" + iTemplate.Id);\r\n\r\n    // We can determine whether the view has already been loaded by matching the 'RoutingState.Origin' argument\r\n    // on the existing view model inside that target selector with the path.\r\n    for (let i = 0; i < viewModels.length; i++) {\r\n      var vmOther = viewModels[i];\r\n      var vmArg = vmOther.$router.VMArg;\r\n      if (vmArg != null) {\r\n        if (typeof vmArg['RoutingState.Origin'] === 'string' && utils.equal(vmArg['RoutingState.Origin'], iPath)) return;\r\n      }\r\n    }\r\n\r\n    // Support enter interception.\r\n    if (iDisableEvent != true && vm.hasOwnProperty('onRouteEnter')) {\r\n      if (this.onRouteEnter(iPath, iTemplate) == false || vm.onRouteEnter(iPath, iTemplate) == false) return;\r\n    }\r\n\r\n    // Check if the route has valid target.\r\n    if (iTemplate.Target === null) {\r\n      console.error(\"router> the Target for template '\" + iTemplate.Id + \"' was not set.  Use vm.onRouteEnter() to set the target.\");\r\n      return;\r\n    }\r\n\r\n    // If target DOM element isn't found, redirect URL to the path.\r\n    if (document.getElementById(iTemplate.Target) == null) {\r\n      if (isRedirect === true) {\r\n        if (this.debug) console.log(\"router> target '\" + iTemplate.Target + \"' not found in DOM\");\r\n        return;\r\n      }\r\n      else {\r\n        if (this.debug) console.log(\"router> target '\" + iTemplate.Target + \"' not found in DOM, use redirect instead\");\r\n        return this.router.redirect(this.toUrl(iPath), viewModels);\r\n      }\r\n    }\r\n\r\n    // Load the view associated with the route asynchronously.\r\n    this.loadView('#' + iTemplate.Target, iTemplate.ViewUrl, iTemplate.JSModuleUrl, { 'RoutingState.Origin': iPath }, () => {\r\n      // If load is successful, update the active route.\r\n      this.dispatchActiveRoutingState(iPath);\r\n\r\n      // Support exit interception.\r\n      if (iDisableEvent != true && vm.hasOwnProperty('onRouteExit')) vm.onRouteExit(iPath, iTemplate);\r\n\r\n      if (typeof iCallbackFn === 'function') iCallbackFn.call(vm);\r\n    });\r\n  }\r\n\r\n  routeToRoute(iRoute) {\r\n    var path = this.vm.$route(iRoute);\r\n    if (path == null || path == '') throw new Error('The route passed to $routeTo is invalid.');\r\n\r\n    setTimeout(() => this.router.pushState({}, '', path));\r\n  }\r\n\r\n  // Routes the URL if the view model implements IRoutable.\r\n  // Returns true if the view model handles the routing.\r\n  routeUrl(isRedirect) {\r\n    if (!this.hasRoutingState) return false;\r\n\r\n    var root = this.RoutingState.Root;\r\n    if (root == null) return false;\r\n\r\n    // Get the URL path to route.\r\n    var urlPath = this.router.urlPath;\r\n\r\n    if (this.debug) console.log('router> routing ' + urlPath);\r\n\r\n    // If the URL path matches the root path of this view, use the template with a blank URL pattern if provided.\r\n    if (utils.equal(urlPath, root) || utils.equal(urlPath, root + '/') || urlPath === '/') {\r\n      var match = utils.grep(this.RoutingState.Templates, function(iTemplate) {\r\n        return iTemplate.UrlPattern === '';\r\n      });\r\n      if (match.length > 0) {\r\n        this.routeTo('', match[0], null, null, isRedirect);\r\n        this.router.urlPath = '';\r\n        this.raiseRoutedEvent();\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    // If the URL path starts with the root path of this view, look at the next path and try to match it with the\r\n    // anchor tags in this view that are bound with the vmRoute binding type.  If there is match, route to that path.\r\n    root = root + '/';\r\n    if (utils.startsWith(urlPath, root)) {\r\n      var routeElem = null;\r\n      var match = utils.grep(this.routes, function(elem) {\r\n        return utils.startsWith(urlPath + '/', elem.Url + '/');\r\n      });\r\n      if (match.length > 0) {\r\n        // If more than one match, find the best match.\r\n        for (var i = 0; i < match.length; i++) if (routeElem == null || routeElem.Url.length < match[i].Url.length) routeElem = match[i];\r\n      }\r\n\r\n      if (routeElem != null) {\r\n        var path = routeElem.Path;\r\n        var template =\r\n          this.hasOwnProperty('pathToRoute') && this.pathToRoute.hasOwnProperty(path) ? this.pathToRoute[path].$template : null;\r\n        if (template != null) {\r\n          // If the URL path is completely routed, clear it.\r\n          if (utils.equal(this.router.urlPath, this.toUrl(path))) this.router.urlPath = '';\r\n\r\n          // If route's not already active, route to it.\r\n          if (!utils.equal(this.RoutingState.Active, path)) {\r\n            this.routeTo(path, template, false, () => this.raiseRoutedEvent(), isRedirect);\r\n          }\r\n          else this.raiseRoutedEvent();\r\n          return true;\r\n        }\r\n      }\r\n      else if (this.router.match(urlPath)) {\r\n        // If no vmRoute binding matches, try to match with any template's URL pattern.\r\n        this.router.urlPath = '';\r\n        this.raiseRoutedEvent();\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Builds an absolute URL from a path.\r\n  toUrl(iPath) {\r\n    let path = utils.trim(iPath);\r\n    if (path.charAt(0) != '(' && path != '') path = '/' + path;\r\n    return this.hasRoutingState ? this.RoutingState.Root + path : iPath;\r\n  }\r\n}\r\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport dotnetifyVMRouter from '../core/dotnetify-vm-router';\r\nimport $ from 'jquery';\r\nimport utils from '../libs/utils';\r\n\r\nclass templateWrapper {\r\n  constructor(template) {\r\n    this.template = template;\r\n  }\r\n  get Id() {\r\n    return this.template.Id();\r\n  }\r\n  get Root() {\r\n    return this.template.Root();\r\n  }\r\n  get UrlPattern() {\r\n    return this.template.UrlPattern();\r\n  }\r\n  get ViewUrl() {\r\n    return this.template.ViewUrl();\r\n  }\r\n  set ViewUrl(value) {\r\n    this.template.ViewUrl(value);\r\n  }\r\n  get JSModuleUrl() {\r\n    return this.template.JSModuleUrl();\r\n  }\r\n  set JSModuleUrl(value) {\r\n    this.template.JSModuleUrl(value);\r\n  }\r\n  get Target() {\r\n    return this.template.Target();\r\n  }\r\n  set Target(value) {\r\n    this.template.Target(value);\r\n  }\r\n}\r\n\r\nclass routingStateWrapper {\r\n  constructor(routingState) {\r\n    this.routingState = routingState;\r\n  }\r\n  get Root() {\r\n    return this.routingState.Root();\r\n  }\r\n  set Root(value) {\r\n    this.routingState.Root(value);\r\n  }\r\n  get Templates() {\r\n    const templates = typeof this.routingState.Templates == 'function' ? this.routingState.Templates() : null;\r\n    return templates ? templates.map(template => new templateWrapper(template)) : null;\r\n  }\r\n  get Active() {\r\n    return this.routingState.Active();\r\n  }\r\n  set Active(value) {\r\n    this.routingState.Active(value);\r\n  }\r\n  get Origin() {\r\n    return this.routingState.Origin();\r\n  }\r\n  set Origin(value) {\r\n    this.routingState.Origin(value);\r\n  }\r\n}\r\n\r\nexport default class dotnetifyKoVMRouter extends dotnetifyVMRouter {\r\n  get hasRoutingState() {\r\n    return this.vm.hasOwnProperty('RoutingState');\r\n  }\r\n  get RoutingState() {\r\n    return new routingStateWrapper(this.vm.RoutingState);\r\n  }\r\n  get VMRoot() {\r\n    return this.vm.$element.attr('data-vm-root');\r\n  }\r\n  get VMArg() {\r\n    return this.vm.$element.attr('data-vm-arg');\r\n  }\r\n\r\n  constructor(iVM, iDotNetifyRouter) {\r\n    super(iVM, iDotNetifyRouter);\r\n  }\r\n\r\n  // Dispatch the active routing state to the server.\r\n  dispatchActiveRoutingState(iPath) {\r\n    this.RoutingState.Active = iPath;\r\n  }\r\n  onRouteEnter(iPath, iTemplate) {\r\n    if (!iTemplate.ViewUrl) iTemplate.ViewUrl = iTemplate.Id + '.html';\r\n    return true;\r\n  }\r\n\r\n  // Loads a view into a target element.\r\n  // Method parameters: TargetSelector, ViewUrl, iJsModuleUrl, iVmArg, iCallbackFn\r\n  loadView(iTargetSelector, iViewUrl, iJsModuleUrl, iVmArg, iCallbackFn) {\r\n    const vm = this.vm;\r\n\r\n    // If no view URL is given, empty the target DOM element.\r\n    if (iViewUrl == null || iViewUrl == '') {\r\n      $(iTargetSelector).empty();\r\n      return;\r\n    }\r\n\r\n    const callbackFn = () => {\r\n      // If the view model supports routing, add the root path to the view, to be used\r\n      // to build the absolute route path, and view model argument if provided.\r\n      if (this.hasRoutingState && this.RoutingState.Root) {\r\n        const vmElems = $(iTargetSelector).find('[data-vm]').toArray();\r\n        vmElems.forEach(element => {\r\n          var root = $(element).attr('data-vm-root');\r\n          root = root != null ? '/' + utils.trim(vm.RoutingState.Root()) + '/' + utils.trim(root) : vm.RoutingState.Root();\r\n          $(element).attr('data-vm-root', root);\r\n\r\n          if (iVmArg != null && !$.isEmptyObject(iVmArg)) {\r\n            // If there's already a data-vm-arg, combine the values.\r\n            // Take care not to override server-side routing arguments.\r\n            var vmArg = $(element).attr('data-vm-arg');\r\n            vmArg = vmArg != null ? $.extend(iVmArg, $.parseJSON(vmArg.replace(/'/g, '\"'))) : iVmArg;\r\n\r\n            $(element).attr('data-vm-arg', JSON.stringify(vmArg));\r\n          }\r\n        });\r\n      }\r\n\r\n      // Call the callback function.\r\n      if (typeof iCallbackFn === 'function') iCallbackFn.apply(this);\r\n    };\r\n\r\n    // Provide the opportunity to override the URL.\r\n    iViewUrl = this.router.overrideUrl(iViewUrl);\r\n\r\n    vm.$loadView(iTargetSelector, iViewUrl, iJsModuleUrl, iVmArg, callbackFn);\r\n  }\r\n\r\n  // Routes to a path.\r\n  manualRouteTo(iPath, iTarget, iViewUrl, iJSModuleUrl) {\r\n    const template = {\r\n      Target: () => iTarget,\r\n      ViewUrl: () => iViewUrl,\r\n      JSModuleUrl: () => iJSModuleUrl\r\n    };\r\n    this.$router.routeTo(iPath, template, true);\r\n  }\r\n}\r\n","/*\r\nPathJS - Copyright (c) 2011 Mike Trpcic, released under the MIT license.\r\n */\r\n\r\nvar Path = {\r\n\t// Need this specific version, because latest version is causing issue.\r\n\tversion: '0.8.5',\r\n\tmap: function(path) {\r\n\t\tif (Path.routes.defined.hasOwnProperty(path)) {\r\n\t\t\treturn Path.routes.defined[path];\r\n\t\t} else {\r\n\t\t\treturn new Path.core.route(path);\r\n\t\t}\r\n\t},\r\n\troot: function(path) {\r\n\t\tPath.routes.root = path;\r\n\t},\r\n\trescue: function(fn) {\r\n\t\tPath.routes.rescue = fn;\r\n\t},\r\n\thistory: {\r\n\t\tinitial: {}, // Empty container for \"Initial Popstate\" checking variables.\r\n\t\tpushState: function(state, title, path) {\r\n\t\t\tif (Path.history.supported) {\r\n\t\t\t\tif (Path.dispatch(path)) {\r\n\t\t\t\t\thistory.pushState(state, title, path);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (Path.history.fallback) {\r\n\t\t\t\t\twindow.location.hash = '#' + path;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tpopState: function(event) {\r\n\t\t\tvar initialPop = !Path.history.initial.popped && location.href == Path.history.initial.URL;\r\n\t\t\tPath.history.initial.popped = true;\r\n\t\t\tif (initialPop) return;\r\n\t\t\tPath.dispatch(document.location.pathname === '/' ? '' : document.location.pathname);\r\n\t\t},\r\n\t\tlisten: function(fallback) {\r\n\t\t\tPath.history.supported = !!(window.history && window.history.pushState);\r\n\t\t\tPath.history.fallback = fallback;\r\n\r\n\t\t\tif (Path.history.supported) {\r\n\t\t\t\t(Path.history.initial.popped = 'state' in window.history), (Path.history.initial.URL = location.href);\r\n\t\t\t\twindow.onpopstate = Path.history.popState;\r\n\t\t\t} else {\r\n\t\t\t\tif (Path.history.fallback) {\r\n\t\t\t\t\tfor (route in Path.routes.defined) {\r\n\t\t\t\t\t\tif (route.charAt(0) != '#') {\r\n\t\t\t\t\t\t\tPath.routes.defined['#' + route] = Path.routes.defined[route];\r\n\t\t\t\t\t\t\tPath.routes.defined['#' + route].path = '#' + route;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPath.listen();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmatch: function(path, parameterize) {\r\n\t\tvar params = {},\r\n\t\t\troute = null,\r\n\t\t\tpossible_routes,\r\n\t\t\tslice,\r\n\t\t\ti,\r\n\t\t\tj,\r\n\t\t\tcompare,\r\n\t\t\tresult;\r\n\t\tfor (route in Path.routes.defined) {\r\n\t\t\tif (route !== null && route !== undefined) {\r\n\t\t\t\troute = Path.routes.defined[route];\r\n\t\t\t\tpossible_routes = route.partition();\r\n\t\t\t\tfor (j = 0; j < possible_routes.length; j++) {\r\n\t\t\t\t\tslice = possible_routes[j];\r\n\t\t\t\t\tcompare = path;\r\n\t\t\t\t\tif (slice.search(/:/) > 0) {\r\n\t\t\t\t\t\tfor (i = 0; i < slice.split('/').length; i++) {\r\n\t\t\t\t\t\t\tif (i < compare.split('/').length && slice.split('/')[i].charAt(0) === ':') {\r\n\t\t\t\t\t\t\t\tparams[slice.split('/')[i].replace(/:/, '')] = compare.split('/')[i];\r\n\t\t\t\t\t\t\t\tresult = compare.split('/');\r\n\t\t\t\t\t\t\t\tresult[i] = slice.split('/')[i];\r\n\t\t\t\t\t\t\t\tcompare = result.join('/');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (slice === compare) {\r\n\t\t\t\t\t\tif (parameterize) {\r\n\t\t\t\t\t\t\troute.params = params;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn route;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tdispatch: function(passed_route) {\r\n\t\tvar previous_route, matched_route;\r\n\t\tif (Path.routes.current !== passed_route) {\r\n\t\t\tPath.routes.previous = Path.routes.current;\r\n\t\t\tPath.routes.current = passed_route;\r\n\t\t\tmatched_route = Path.match(passed_route, true);\r\n\r\n\t\t\tif (Path.routes.previous) {\r\n\t\t\t\tprevious_route = Path.match(Path.routes.previous);\r\n\t\t\t\tif (previous_route !== null && previous_route.do_exit !== null) {\r\n\t\t\t\t\tprevious_route.do_exit();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (matched_route !== null) {\r\n\t\t\t\tmatched_route.run();\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tif (Path.routes.rescue !== null) {\r\n\t\t\t\t\tPath.routes.rescue();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tlisten: function() {\r\n\t\tvar fn = function() {\r\n\t\t\tPath.dispatch(location.hash);\r\n\t\t};\r\n\r\n\t\tif (location.hash === '') {\r\n\t\t\tif (Path.routes.root !== null) {\r\n\t\t\t\tlocation.hash = Path.routes.root;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// The 'document.documentMode' checks below ensure that PathJS fires the right events\r\n\t\t// even in IE \"Quirks Mode\".\r\n\t\tif ('onhashchange' in window && (!document.documentMode || document.documentMode >= 8)) {\r\n\t\t\twindow.onhashchange = fn;\r\n\t\t} else {\r\n\t\t\tsetInterval(fn, 50);\r\n\t\t}\r\n\r\n\t\tif (location.hash !== '') {\r\n\t\t\tPath.dispatch(location.hash);\r\n\t\t}\r\n\t},\r\n\tcore: {\r\n\t\troute: function(path) {\r\n\t\t\tthis.path = path;\r\n\t\t\tthis.action = null;\r\n\t\t\tthis.do_enter = [];\r\n\t\t\tthis.do_exit = null;\r\n\t\t\tthis.params = {};\r\n\t\t\tPath.routes.defined[path] = this;\r\n\t\t}\r\n\t},\r\n\troutes: {\r\n\t\tcurrent: null,\r\n\t\troot: null,\r\n\t\trescue: null,\r\n\t\tprevious: null,\r\n\t\tdefined: {}\r\n\t}\r\n};\r\n\r\nPath.core.route.prototype = {\r\n\tto: function(fn) {\r\n\t\tthis.action = fn;\r\n\t\treturn this;\r\n\t},\r\n\tenter: function(fns) {\r\n\t\tif (fns instanceof Array) {\r\n\t\t\tthis.do_enter = this.do_enter.concat(fns);\r\n\t\t} else {\r\n\t\t\tthis.do_enter.push(fns);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\texit: function(fn) {\r\n\t\tthis.do_exit = fn;\r\n\t\treturn this;\r\n\t},\r\n\tpartition: function() {\r\n\t\tvar parts = [],\r\n\t\t\toptions = [],\r\n\t\t\tre = /\\(([^}]+?)\\)/g,\r\n\t\t\ttext,\r\n\t\t\ti;\r\n\t\twhile ((text = re.exec(this.path))) {\r\n\t\t\tparts.push(text[1]);\r\n\t\t}\r\n\t\toptions.push(this.path.split('(')[0]);\r\n\t\tfor (i = 0; i < parts.length; i++) {\r\n\t\t\toptions.push(options[options.length - 1] + parts[i]);\r\n\t\t}\r\n\t\treturn options;\r\n\t},\r\n\trun: function() {\r\n\t\tvar halt_execution = false,\r\n\t\t\ti,\r\n\t\t\tresult,\r\n\t\t\tprevious;\r\n\r\n\t\tif (Path.routes.defined[this.path].hasOwnProperty('do_enter')) {\r\n\t\t\tif (Path.routes.defined[this.path].do_enter.length > 0) {\r\n\t\t\t\tfor (i = 0; i < Path.routes.defined[this.path].do_enter.length; i++) {\r\n\t\t\t\t\tresult = Path.routes.defined[this.path].do_enter[i].apply(this, null);\r\n\t\t\t\t\tif (result === false) {\r\n\t\t\t\t\t\thalt_execution = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!halt_execution) {\r\n\t\t\tPath.routes.defined[this.path].action();\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default Path;\r\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport Path from '../libs/path';\r\n\r\nexport default class dotnetifyRouter {\r\n  version = '2.0.1';\r\n\r\n  // URL path that will be parsed when performing routing.\r\n  urlPath = document.location.pathname;\r\n\r\n  constructor(debug) {\r\n    this.debug = debug;\r\n  }\r\n\r\n  // Initialize routing using PathJS.\r\n  init() {\r\n    if (typeof Path !== 'undefined') {\r\n      Path.history.listen(true);\r\n      Path.routes.rescue = function() {\r\n        //window.location.replace(document.location.pathname);\r\n      };\r\n    }\r\n    else throw new Error('Pathjs library is required for routing.');\r\n  }\r\n\r\n  // Map a route to an action.\r\n  mapTo(iPath, iFn) {\r\n    iPath = iPath.length > 0 ? iPath : '/';\r\n    if (typeof Path !== 'undefined')\r\n      Path.map(iPath).to(function() {\r\n        iFn(this.params);\r\n      });\r\n  }\r\n\r\n  // Match a URL path to a route and run the action.\r\n  match(iUrlPath) {\r\n    if (typeof Path !== 'undefined') {\r\n      var matched = Path.match(iUrlPath, true);\r\n      if (matched != null) {\r\n        matched.run();\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Optional callback to override a URL before performing routing.\r\n  overrideUrl(iUrl) {\r\n    return iUrl;\r\n  }\r\n\r\n  // Push state to HTML history.\r\n  pushState(iState, iTitle, iPath) {\r\n    this.urlPath = '';\r\n    if (typeof Path !== 'undefined') Path.history.pushState(iState, iTitle, iPath);\r\n  }\r\n\r\n  // Redirect to the a URL.\r\n  redirect(iUrl, viewModels) {\r\n    // Check first whether existing views can handle routing this URL.\r\n    // Otherwise, do a hard browser redirect.\r\n    this.urlPath = iUrl;\r\n    for (let i = 0; i < viewModels.length; i++) {\r\n      const vm = viewModels[i];\r\n      if (vm.$router.routeUrl(true)) {\r\n        if (this.debug) console.log('router> redirected');\r\n        return;\r\n      }\r\n    }\r\n    window.location.replace(iUrl);\r\n  }\r\n\r\n  // Called by dotNetify when a view model is ready.\r\n  $ready() {\r\n    this.$router.initRouting();\r\n  }\r\n}\r\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport dotnetify from './dotnetify-ko';\r\nimport dotnetifyRouter from '../core/dotnetify-router';\r\nimport dotnetifyKoVMRouter from './dotnetify-ko.vm-router';\r\nimport $ from 'jquery';\r\nimport * as ko from 'knockout';\r\n\r\n// Add plugin functions.\r\ndotnetify.ko.router = new dotnetifyRouter(dotnetify.debug);\r\n\r\n// Inject a view model with functions.\r\ndotnetify.ko.router.$inject = function(iVM) {\r\n  const router = new dotnetifyKoVMRouter(iVM, dotnetify.ko.router);\r\n\r\n  // Put functions inside $router namespace.\r\n  iVM.$router = router;\r\n};\r\n\r\n// Custom knockout binding to do routing.\r\nko.bindingHandlers.vmRoute = {\r\n  update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n    var vm = bindingContext.$root;\r\n    var route = ko.unwrap(valueAccessor());\r\n\r\n    if (!route.hasOwnProperty('Path') || !route.hasOwnProperty('TemplateId'))\r\n      throw new Error('invalid vmRoute data at ' + element.outerHTML);\r\n\r\n    // Build the absolute root path.\r\n    vm.$router.initRoot();\r\n\r\n    // If the route path is not defined, use the URL pattern from the associated template.\r\n    // This is so that we don't send the same data twice if both are equal.\r\n    let path = route.Path();\r\n    var template = null;\r\n    if (vm.hasOwnProperty('RoutingState') && typeof vm.RoutingState.Templates === 'function' && vm.RoutingState.Templates() != null) {\r\n      var match = $.grep(vm.RoutingState.Templates(), function(iTemplate) {\r\n        return iTemplate.Id() == route.TemplateId();\r\n      });\r\n      if (match.length > 0) {\r\n        template = match[0];\r\n        if (path == null) {\r\n          path = template.UrlPattern();\r\n          route.Path(path);\r\n        }\r\n      }\r\n      else if (route.RedirectRoot() == null)\r\n        throw new Error(\"vmRoute cannot find route template '\" + route.TemplateId() + \"' at \" + element.outerHTML);\r\n    }\r\n\r\n    // If the path has a redirect root, the path doesn't belong to the current root and needs to be\r\n    // redirected to a different one.  Set the absolute path to the HREF attribute, and prevent the\r\n    // default behavior of the anchor click event and instead do push to HTML5 history state, which\r\n    // would attempt to resolve the path first before resorting to hard browser redirect.\r\n    if (route.RedirectRoot() != null) {\r\n      // Combine the redirect root with the view model's root.\r\n      var redirectRoot = route.RedirectRoot();\r\n      if (redirectRoot.charAt(0) == '/') redirectRoot = redirectRoot.substr(0, redirectRoot.length - 1);\r\n      var redirectRootPath = route.RedirectRoot().split('/');\r\n\r\n      var url = '';\r\n      var absRoot = vm.$element.attr('data-vm-root');\r\n      if (absRoot != null) {\r\n        var absRootPath = absRoot.split('/');\r\n        for (i = 0; i < absRootPath.length; i++) {\r\n          if (absRootPath[i] != '' && absRootPath[i] == redirectRootPath[0]) break;\r\n          url += absRootPath[i] + '/';\r\n        }\r\n      }\r\n      url += redirectRoot + '/' + path;\r\n\r\n      $(element).attr('href', url).attr('data-vm-route', path).click(function(iEvent) {\r\n        iEvent.preventDefault();\r\n        dotnetify.ko.router.pushState({}, '', $(this).attr('href'));\r\n      });\r\n      return;\r\n    }\r\n\r\n    // For quick lookup, save the mapping between the path to the route inside the view model.\r\n    if (template == null) throw new Error('vmRoute cannot find any route template at ' + element.outerHTML);\r\n\r\n    route.$template = template;\r\n    vm.$router.pathToRoute = vm.$router.pathToRoute || {};\r\n    vm.$router.pathToRoute[path] = route;\r\n\r\n    // Set the absolute path to the HREF attribute, and prevent the default behavior of\r\n    // the anchor click event and instead do push to HTML5 history state.\r\n    $(element).attr('href', vm.$router.toUrl(path)).attr('data-vm-route', path).click(function(iEvent) {\r\n      iEvent.preventDefault();\r\n      dotnetify.ko.router.pushState({}, '', $(this).attr('href'));\r\n    });\r\n  }\r\n};\r\n\r\n// Register the plugin to dotNetify.\r\ndotnetify.ko.plugins['router'] = dotnetify.ko.router;\r\n","/// Knockout Mapping plugin v2.4.0\r\n/// (c) 2013 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/\r\n/// License: MIT (http://www.opensource.org/licenses/mit-license.php)\r\n(function(d){\"function\"===typeof require&&\"object\"===typeof exports&&\"object\"===typeof module?d(require(\"knockout\"),exports):\"function\"===typeof define&&define.amd?define([\"knockout\",\"exports\"],d):d(ko,ko.mapping={})})(function(d,f){function y(b,c){var a,e;for(e in c)if(c.hasOwnProperty(e)&&c[e])if(a=f.getType(b[e]),e&&b[e]&&\"array\"!==a&&\"string\"!==a)y(b[e],c[e]);else if(\"array\"===f.getType(b[e])&&\"array\"===f.getType(c[e])){a=b;for(var d=e,l=b[e],n=c[e],t={},g=l.length-1;0<=g;--g)t[l[g]]=l[g];for(g=\r\nn.length-1;0<=g;--g)t[n[g]]=n[g];l=[];n=void 0;for(n in t)l.push(t[n]);a[d]=l}else b[e]=c[e]}function E(b,c){var a={};y(a,b);y(a,c);return a}function z(b,c){for(var a=E({},b),d=L.length-1;0<=d;d--){var f=L[d];a[f]&&(a[\"\"]instanceof Object||(a[\"\"]={}),a[\"\"][f]=a[f],delete a[f])}c&&(a.ignore=h(c.ignore,a.ignore),a.include=h(c.include,a.include),a.copy=h(c.copy,a.copy),a.observe=h(c.observe,a.observe));a.ignore=h(a.ignore,j.ignore);a.include=h(a.include,j.include);a.copy=h(a.copy,j.copy);a.observe=h(a.observe,\r\nj.observe);a.mappedProperties=a.mappedProperties||{};a.copiedProperties=a.copiedProperties||{};return a}function h(b,c){\"array\"!==f.getType(b)&&(b=\"undefined\"===f.getType(b)?[]:[b]);\"array\"!==f.getType(c)&&(c=\"undefined\"===f.getType(c)?[]:[c]);return d.utils.arrayGetDistinctValues(b.concat(c))}function F(b,c,a,e,k,l,n){var t=\"array\"===f.getType(d.utils.unwrapObservable(c));l=l||\"\";if(f.isMapped(b)){var g=d.utils.unwrapObservable(b)[p];a=E(g,a)}var j=n||k,h=function(){return a[e]&&a[e].create instanceof\r\nFunction},x=function(b){var f=G,g=d.dependentObservable;d.dependentObservable=function(a,b,c){c=c||{};a&&\"object\"==typeof a&&(c=a);var e=c.deferEvaluation,M=!1;c.deferEvaluation=!0;a=new H(a,b,c);if(!e){var g=a,e=d.dependentObservable;d.dependentObservable=H;a=d.isWriteableObservable(g);d.dependentObservable=e;a=H({read:function(){M||(d.utils.arrayRemoveItem(f,g),M=!0);return g.apply(g,arguments)},write:a&&function(a){return g(a)},deferEvaluation:!0});f.push(a)}return a};d.dependentObservable.fn=\r\nH.fn;d.computed=d.dependentObservable;b=d.utils.unwrapObservable(k)instanceof Array?a[e].create({data:b||c,parent:j,skip:N}):a[e].create({data:b||c,parent:j});d.dependentObservable=g;d.computed=d.dependentObservable;return b},u=function(){return a[e]&&a[e].update instanceof Function},v=function(b,f){var g={data:f||c,parent:j,target:d.utils.unwrapObservable(b)};d.isWriteableObservable(b)&&(g.observable=b);return a[e].update(g)};if(n=I.get(c))return n;e=e||\"\";if(t){var t=[],s=!1,m=function(a){return a};\r\na[e]&&a[e].key&&(m=a[e].key,s=!0);d.isObservable(b)||(b=d.observableArray([]),b.mappedRemove=function(a){var c=\"function\"==typeof a?a:function(b){return b===m(a)};return b.remove(function(a){return c(m(a))})},b.mappedRemoveAll=function(a){var c=C(a,m);return b.remove(function(a){return-1!=d.utils.arrayIndexOf(c,m(a))})},b.mappedDestroy=function(a){var c=\"function\"==typeof a?a:function(b){return b===m(a)};return b.destroy(function(a){return c(m(a))})},b.mappedDestroyAll=function(a){var c=C(a,m);return b.destroy(function(a){return-1!=\r\nd.utils.arrayIndexOf(c,m(a))})},b.mappedIndexOf=function(a){var c=C(b(),m);a=m(a);return d.utils.arrayIndexOf(c,a)},b.mappedCreate=function(a){if(-1!==b.mappedIndexOf(a))throw Error(\"There already is an object with the key that you specified.\");var c=h()?x(a):a;u()&&(a=v(c,a),d.isWriteableObservable(c)?c(a):c=a);b.push(c);return c});n=C(d.utils.unwrapObservable(b),m).sort();g=C(c,m);s&&g.sort();s=d.utils.compareArrays(n,g);n={};var J,A=d.utils.unwrapObservable(c),y={},z=!0,g=0;for(J=A.length;g<J;g++){var r=\r\nm(A[g]);if(void 0===r||r instanceof Object){z=!1;break}y[r]=A[g]}var A=[],B=0,g=0;for(J=s.length;g<J;g++){var r=s[g],q,w=l+\"[\"+g+\"]\";switch(r.status){case \"added\":var D=z?y[r.value]:K(d.utils.unwrapObservable(c),r.value,m);q=F(void 0,D,a,e,b,w,k);h()||(q=d.utils.unwrapObservable(q));w=O(d.utils.unwrapObservable(c),D,n);q===N?B++:A[w-B]=q;n[w]=!0;break;case \"retained\":D=z?y[r.value]:K(d.utils.unwrapObservable(c),r.value,m);q=K(b,r.value,m);F(q,D,a,e,b,w,k);w=O(d.utils.unwrapObservable(c),D,n);A[w]=\r\nq;n[w]=!0;break;case \"deleted\":q=K(b,r.value,m)}t.push({event:r.status,item:q})}b(A);a[e]&&a[e].arrayChanged&&d.utils.arrayForEach(t,function(b){a[e].arrayChanged(b.event,b.item)})}else if(P(c)){b=d.utils.unwrapObservable(b);if(!b){if(h())return s=x(),u()&&(s=v(s)),s;if(u())return v(s);b={}}u()&&(b=v(b));I.save(c,b);if(u())return b;Q(c,function(e){var f=l.length?l+\".\"+e:e;if(-1==d.utils.arrayIndexOf(a.ignore,f))if(-1!=d.utils.arrayIndexOf(a.copy,f))b[e]=c[e];else if(\"object\"!=typeof c[e]&&\"array\"!=\r\ntypeof c[e]&&0<a.observe.length&&-1==d.utils.arrayIndexOf(a.observe,f))b[e]=c[e],a.copiedProperties[f]=!0;else{var g=I.get(c[e]),k=F(b[e],c[e],a,e,b,f,b),g=g||k;if(0<a.observe.length&&-1==d.utils.arrayIndexOf(a.observe,f))b[e]=g(),a.copiedProperties[f]=!0;else{if(d.isWriteableObservable(b[e]))b[e](d.utils.unwrapObservable(g));else g=void 0===b[e]?g:d.utils.unwrapObservable(g),b[e]=g;a.mappedProperties[f]=!0}}})}else switch(f.getType(c)){case \"function\":u()?d.isWriteableObservable(c)?(c(v(c)),b=c):\r\nb=v(c):b=c;break;default:if(d.isWriteableObservable(b))return q=u()?v(b):d.utils.unwrapObservable(c),b(q),q;h()||u();b=h()?x():d.observable(d.utils.unwrapObservable(c));u()&&b(v(b))}return b}function O(b,c,a){for(var e=0,d=b.length;e<d;e++)if(!0!==a[e]&&b[e]===c)return e;return null}function R(b,c){var a;c&&(a=c(b));\"undefined\"===f.getType(a)&&(a=b);return d.utils.unwrapObservable(a)}function K(b,c,a){b=d.utils.unwrapObservable(b);for(var e=0,f=b.length;e<f;e++){var l=b[e];if(R(l,a)===c)return l}throw Error(\"When calling ko.update*, the key '\"+\r\nc+\"' was not found!\");}function C(b,c){return d.utils.arrayMap(d.utils.unwrapObservable(b),function(a){return c?R(a,c):a})}function Q(b,c){if(\"array\"===f.getType(b))for(var a=0;a<b.length;a++)c(a);else for(a in b)c(a)}function P(b){var c=f.getType(b);return(\"object\"===c||\"array\"===c)&&null!==b}function T(){var b=[],c=[];this.save=function(a,e){var f=d.utils.arrayIndexOf(b,a);0<=f?c[f]=e:(b.push(a),c.push(e))};this.get=function(a){a=d.utils.arrayIndexOf(b,a);return 0<=a?c[a]:void 0}}function S(){var b=\r\n{},c=function(a){var c;try{c=a}catch(d){c=\"$$$\"}a=b[c];void 0===a&&(a=new T,b[c]=a);return a};this.save=function(a,b){c(a).save(a,b)};this.get=function(a){return c(a).get(a)}}var p=\"__ko_mapping__\",H=d.dependentObservable,B=0,G,I,L=[\"create\",\"update\",\"key\",\"arrayChanged\"],N={},x={include:[\"_destroy\"],ignore:[],copy:[],observe:[]},j=x;f.isMapped=function(b){return(b=d.utils.unwrapObservable(b))&&b[p]};f.fromJS=function(b){if(0==arguments.length)throw Error(\"When calling ko.fromJS, pass the object you want to convert.\");\r\ntry{B++||(G=[],I=new S);var c,a;2==arguments.length&&(arguments[1][p]?a=arguments[1]:c=arguments[1]);3==arguments.length&&(c=arguments[1],a=arguments[2]);a&&(c=E(c,a[p]));c=z(c);var e=F(a,b,c);a&&(e=a);if(!--B)for(;G.length;){var d=G.pop();d&&d()}e[p]=E(e[p],c);return e}catch(f){throw B=0,f;}};f.fromJSON=function(b){var c=d.utils.parseJson(b);arguments[0]=c;return f.fromJS.apply(this,arguments)};f.updateFromJS=function(){throw Error(\"ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!\");\r\n};f.updateFromJSON=function(){throw Error(\"ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!\");};f.toJS=function(b,c){j||f.resetDefaultOptions();if(0==arguments.length)throw Error(\"When calling ko.mapping.toJS, pass the object you want to convert.\");if(\"array\"!==f.getType(j.ignore))throw Error(\"ko.mapping.defaultOptions().ignore should be an array.\");if(\"array\"!==f.getType(j.include))throw Error(\"ko.mapping.defaultOptions().include should be an array.\");\r\nif(\"array\"!==f.getType(j.copy))throw Error(\"ko.mapping.defaultOptions().copy should be an array.\");c=z(c,b[p]);return f.visitModel(b,function(a){return d.utils.unwrapObservable(a)},c)};f.toJSON=function(b,c){var a=f.toJS(b,c);return d.utils.stringifyJson(a)};f.defaultOptions=function(){if(0<arguments.length)j=arguments[0];else return j};f.resetDefaultOptions=function(){j={include:x.include.slice(0),ignore:x.ignore.slice(0),copy:x.copy.slice(0)}};f.getType=function(b){if(b&&\"object\"===typeof b){if(b.constructor===\r\nDate)return\"date\";if(b.constructor===Array)return\"array\"}return typeof b};f.visitModel=function(b,c,a){a=a||{};a.visitedObjects=a.visitedObjects||new S;var e,k=d.utils.unwrapObservable(b);if(P(k))a=z(a,k[p]),c(b,a.parentName),e=\"array\"===f.getType(k)?[]:{};else return c(b,a.parentName);a.visitedObjects.save(b,e);var l=a.parentName;Q(k,function(b){if(!(a.ignore&&-1!=d.utils.arrayIndexOf(a.ignore,b))){var j=k[b],g=a,h=l||\"\";\"array\"===f.getType(k)?l&&(h+=\"[\"+b+\"]\"):(l&&(h+=\".\"),h+=b);g.parentName=h;\r\nif(!(-1===d.utils.arrayIndexOf(a.copy,b)&&-1===d.utils.arrayIndexOf(a.include,b)&&k[p]&&k[p].mappedProperties&&!k[p].mappedProperties[b]&&k[p].copiedProperties&&!k[p].copiedProperties[b]&&\"array\"!==f.getType(k)))switch(f.getType(d.utils.unwrapObservable(j))){case \"object\":case \"array\":case \"undefined\":g=a.visitedObjects.get(j);e[b]=\"undefined\"!==f.getType(g)?g:f.visitModel(j,c,a);break;default:e[b]=c(j,a.parentName)}}});return e}});\r\n","/*! jQuery UI - v1.11.4 - 2015-10-01\r\n* http://jqueryui.com\r\n* Includes: widget.js\r\n* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */\r\n\r\n(function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(jQuery)})(function(e){var t=0,i=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,\"events\"),s&&s.remove&&e(n).triggerHandler(\"remove\")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(\".\")[0];return t=t.split(\".\")[1],n=l+\"-\"+t,s||(s=i,i=e.Widget),e.expr[\":\"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+\".\"+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var s,n,a=i.call(arguments,1),o=0,r=a.length;r>o;o++)for(s in a[o])n=a[o][s],a[o].hasOwnProperty(s)&&void 0!==n&&(t[s]=e.isPlainObject(n)?e.isPlainObject(t[s])?e.widget.extend({},t[s],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,s){var n=s.prototype.widgetFullName||t;e.fn[t]=function(a){var o=\"string\"==typeof a,r=i.call(arguments,1),h=this;return o?this.each(function(){var i,s=e.data(this,n);return\"instance\"===a?(h=s,!1):s?e.isFunction(s[a])&&\"_\"!==a.charAt(0)?(i=s[a].apply(s,r),i!==s&&void 0!==i?(h=i&&i.jquery?h.pushStack(i.get()):i,!1):void 0):e.error(\"no such method '\"+a+\"' for \"+t+\" widget instance\"):e.error(\"cannot call methods on \"+t+\" prior to initialization; \"+\"attempted to call method '\"+a+\"'\")}):(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,n);t?(t.option(a||{}),t._init&&t._init()):e.data(this,n,new s(a,this))})),h}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:\"widget\",widgetEventPrefix:\"\",defaultElement:\"<div>\",options:{disabled:!1,create:null},_createWidget:function(i,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=t++,this.eventNamespace=\".\"+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this._trigger(\"create\",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr(\"aria-disabled\").removeClass(this.widgetFullName+\"-disabled \"+\"ui-state-disabled\"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass(\"ui-state-hover\"),this.focusable.removeClass(\"ui-state-focus\")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if(\"string\"==typeof t)if(o={},s=t.split(\".\"),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,\"disabled\"===e&&(this.widget().toggleClass(this.widgetFullName+\"-disabled\",!!t),t&&(this.hoverable.removeClass(\"ui-state-hover\"),this.focusable.removeClass(\"ui-state-focus\"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;\"boolean\"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass(\"ui-state-disabled\")?(\"string\"==typeof o?a[o]:o).apply(a,arguments):void 0}\"string\"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\\w:-]*)\\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||\"\").split(\" \").join(this.eventNamespace+\" \")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return(\"string\"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass(\"ui-state-hover\")},mouseleave:function(t){e(t.currentTarget).removeClass(\"ui-state-hover\")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass(\"ui-state-focus\")},focusout:function(t){e(t.currentTarget).removeClass(\"ui-state-focus\")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:\"fadeIn\",hide:\"fadeOut\"},function(t,i){e.Widget.prototype[\"_\"+t]=function(s,n,a){\"string\"==typeof n&&(n={effect:n});var o,r=n?n===!0||\"number\"==typeof n?i:n.effect||i:t;n=n||{},\"number\"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget});","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","/**\n* jQuery core object.\n*\n* Worker with jQuery deferred\n*\n* Code from: https://github.com/jquery/jquery/blob/master/src/core.js\n*\n*/\n\nvar jQuery = module.exports = {\n\ttype: type\n\t, isArray: isArray\n\t, isFunction: isFunction\n\t, isPlainObject: isPlainObject\n\t, each: each\n\t, extend: extend\n\t, noop: function() {}\n};\n\nvar toString = Object.prototype.toString;\n\nvar class2type = {};\n// Populate the class2type map\n\"Boolean Number String Function Array Date RegExp Object\".split(\" \").forEach(function(name) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n});\n\n\nfunction type( obj ) {\n\treturn obj == null ?\n\t\tString( obj ) :\n\t\t\tclass2type[ toString.call(obj) ] || \"object\";\n}\n\nfunction isFunction( obj ) {\n\treturn jQuery.type(obj) === \"function\";\n}\n\nfunction isArray( obj ) {\n\treturn jQuery.type(obj) === \"array\";\n}\n\nfunction each( object, callback, args ) {\n\tvar name, i = 0,\n\tlength = object.length,\n\tisObj = length === undefined || isFunction( object );\n\n\tif ( args ) {\n\t\tif ( isObj ) {\n\t\t\tfor ( name in object ) {\n\t\t\t\tif ( callback.apply( object[ name ], args ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( ; i < length; ) {\n\t\t\t\tif ( callback.apply( object[ i++ ], args ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// A special, fast, case for the most common use of each\n\t} else {\n\t\tif ( isObj ) {\n\t\t\tfor ( name in object ) {\n\t\t\t\tif ( callback.call( object[ name ], name, object[ name ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( ; i < length; ) {\n\t\t\t\tif ( callback.call( object[ i ], i, object[ i++ ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn object;\n}\n\nfunction isPlainObject( obj ) {\n\t// Must be an Object.\n\tif ( !obj || jQuery.type(obj) !== \"object\" ) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\ttarget = arguments[0] || {},\n\ti = 1,\n\tlength = arguments.length,\n\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\t// extend jQuery itself if only one argument is passed\n\tif ( length === i ) {\n\t\ttarget = this;\n\t\t--i;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n","var jQuery = module.exports = require(\"./jquery-core.js\"),\n\tcore_rspace = /\\s+/;\n/**\n* jQuery Callbacks\n*\n* Code from: https://github.com/jquery/jquery/blob/master/src/callbacks.js\n*\n*/\n\n\n// String to Object options format cache\nvar optionsCache = {};\n\n// Convert String-formatted options into Object-formatted ones and store in cache\nfunction createOptions( options ) {\n\tvar object = optionsCache[ options ] = {};\n\tjQuery.each( options.split( core_rspace ), function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t});\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\t( optionsCache[ options ] || createOptions( options ) ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Last fire value (for non-forgettable lists)\n\t\tmemory,\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\t\t// Flag to know if list is currently firing\n\t\tfiring,\n\t\t// First callback to fire (used internally by add and fireWith)\n\t\tfiringStart,\n\t\t// End of the loop when firing\n\t\tfiringLength,\n\t\t// Index of currently firing callback (modified by remove if needed)\n\t\tfiringIndex,\n\t\t// Actual callback list\n\t\tlist = [],\n\t\t// Stack of fire calls for repeatable lists\n\t\tstack = !options.once && [],\n\t\t// Fire callbacks\n\t\tfire = function( data ) {\n\t\t\tmemory = options.memory && data;\n\t\t\tfired = true;\n\t\t\tfiringIndex = firingStart || 0;\n\t\t\tfiringStart = 0;\n\t\t\tfiringLength = list.length;\n\t\t\tfiring = true;\n\t\t\tfor ( ; list && firingIndex < firingLength; firingIndex++ ) {\n\t\t\t\tif ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {\n\t\t\t\t\tmemory = false; // To prevent further calls using add\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiring = false;\n\t\t\tif ( list ) {\n\t\t\t\tif ( stack ) {\n\t\t\t\t\tif ( stack.length ) {\n\t\t\t\t\t\tfire( stack.shift() );\n\t\t\t\t\t}\n\t\t\t\t} else if ( memory ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t} else {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Actual Callbacks object\n\t\tself = {\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\t// First, we save the current length\n\t\t\t\t\tvar start = list.length;\n\t\t\t\t\t(function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tvar type = jQuery.type( arg );\n\t\t\t\t\t\t\tif ( type === \"function\" ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && type !== \"string\" ) {\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})( arguments );\n\t\t\t\t\t// Do we need to add the callbacks to the\n\t\t\t\t\t// current firing batch?\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tfiringLength = list.length;\n\t\t\t\t\t// With memory, if we're not firing then\n\t\t\t\t\t// we should call right away\n\t\t\t\t\t} else if ( memory ) {\n\t\t\t\t\t\tfiringStart = start;\n\t\t\t\t\t\tfire( memory );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\t\tvar index;\n\t\t\t\t\t\twhile( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\t\tlist.splice( index, 1 );\n\t\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\t\t\tif ( index <= firingLength ) {\n\t\t\t\t\t\t\t\t\tfiringLength--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Control if a given callback is in the list\n\t\t\thas: function( fn ) {\n\t\t\t\treturn jQuery.inArray( fn, list ) > -1;\n\t\t\t},\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tlist = [];\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Have the list do nothing anymore\n\t\t\tdisable: function() {\n\t\t\t\tlist = stack = memory = undefined;\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it disabled?\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\t\t\t// Lock the list in its current state\n\t\t\tlock: function() {\n\t\t\t\tstack = undefined;\n\t\t\t\tif ( !memory ) {\n\t\t\t\t\tself.disable();\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Is it locked?\n\t\t\tlocked: function() {\n\t\t\t\treturn !stack;\n\t\t\t},\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\targs = args || [];\n\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\tif ( list && ( !fired || stack ) ) {\n\t\t\t\t\tif ( firing ) {\n\t\t\t\t\t\tstack.push( args );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfire( args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n","\n/*!\n* jquery-deferred\n* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>\n* MIT Licensed\n*/\n\n/**\n* Library version.\n*/\n\nvar jQuery = module.exports = require(\"./jquery-callbacks.js\"),\n\tcore_slice = Array.prototype.slice;\n\n/**\n* jQuery deferred\n*\n* Code from: https://github.com/jquery/jquery/blob/master/src/deferred.js\n* Doc: http://api.jquery.com/category/deferred-object/\n*\n*/\n\njQuery.extend({\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\t\t\t\t// action, add listener, listener list, final state\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks(\"once memory\"), \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks(\"once memory\"), \"rejected\" ],\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks(\"memory\") ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tthen: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\t\t\t\t\treturn jQuery.Deferred(function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\t\t\t\t\tvar action = tuple[ 0 ],\n\t\t\t\t\t\t\t\tfn = fns[ i ];\n\t\t\t\t\t\t\t// deferred[ done | fail | progress ] for forwarding actions to newDefer\n\t\t\t\t\t\t\tdeferred[ tuple[1] ]( jQuery.isFunction( fn ) ?\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\tvar returned = fn.apply( this, arguments );\n\t\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject )\n\t\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tnewDefer[ action + \"With\" ]( this === deferred ? newDefer : this, [ returned ] );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} :\n\t\t\t\t\t\t\t\tnewDefer[ action ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t}).promise();\n\t\t\t\t},\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Keep pipe for back-compat\n\t\tpromise.pipe = promise.then;\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 3 ];\n\n\t\t\t// promise[ done | fail | progress ] = list.add\n\t\t\tpromise[ tuple[1] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(function() {\n\t\t\t\t\t// state = [ resolved | rejected ]\n\t\t\t\t\tstate = stateString;\n\n\t\t\t\t// [ reject_list | resolve_list ].disable; progress_list.lock\n\t\t\t\t}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );\n\t\t\t}\n\n\t\t\t// deferred[ resolve | reject | notify ] = list.fire\n\t\t\tdeferred[ tuple[0] ] = list.fire;\n\t\t\tdeferred[ tuple[0] + \"With\" ] = list.fireWith;\n\t\t});\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( subordinate /* , ..., subordinateN */ ) {\n\t\tvar i = 0,\n\t\t\tresolveValues = core_slice.call( arguments ),\n\t\t\tlength = resolveValues.length,\n\n\t\t\t// the count of uncompleted subordinates\n\t\t\tremaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,\n\n\t\t\t// the master Deferred. If resolveValues consist of only a single Deferred, just use that.\n\t\t\tdeferred = remaining === 1 ? subordinate : jQuery.Deferred(),\n\n\t\t\t// Update function for both resolve and progress values\n\t\t\tupdateFunc = function( i, contexts, values ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tcontexts[ i ] = this;\n\t\t\t\t\tvalues[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;\n\t\t\t\t\tif( values === progressValues ) {\n\t\t\t\t\t\tdeferred.notifyWith( contexts, values );\n\t\t\t\t\t} else if ( !( --remaining ) ) {\n\t\t\t\t\t\tdeferred.resolveWith( contexts, values );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tprogressValues, progressContexts, resolveContexts;\n\n\t\t// add listeners to Deferred subordinates; treat others as resolved\n\t\tif ( length > 1 ) {\n\t\t\tprogressValues = new Array( length );\n\t\t\tprogressContexts = new Array( length );\n\t\t\tresolveContexts = new Array( length );\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {\n\t\t\t\t\tresolveValues[ i ].promise()\n\t\t\t\t\t\t.done( updateFunc( i, resolveContexts, resolveValues ) )\n\t\t\t\t\t\t.fail( deferred.reject )\n\t\t\t\t\t\t.progress( updateFunc( i, progressContexts, progressValues ) );\n\t\t\t\t} else {\n\t\t\t\t\t--remaining;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if we're not waiting on anything, resolve the master\n\t\tif ( !remaining ) {\n\t\t\tdeferred.resolveWith( resolveContexts, resolveValues );\n\t\t}\n\n\t\treturn deferred.promise();\n\t}\n});\n","\nmodule.exports = require('./lib/jquery-deferred');","/* \r\nCopyright 2017 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\n\r\nvar jQueryDeferred = require(\"jquery-deferred\");\r\nvar jQueryShim = jQueryDeferred.extend(\r\n   function (selector) {\r\n\r\n      if (selector === window || selector.document)\r\n         return {\r\n            0: selector,\r\n            on: function (iEvent, iHandler) { window.addEventListener(iEvent, iHandler); },\r\n            bind: function (iEvent, iHandler) { window.addEventListener(iEvent, iHandler, false); },\r\n            unbind: function (iEvent, iHandler) { window.removeEventListener(iEvent, iHandler, false); }\r\n         };\r\n\r\n      if (typeof selector !== \"string\")\r\n         selector.events = selector.events || {};\r\n\r\n      return {\r\n         0: selector,\r\n\r\n         bind: function (iEvent, iHandler) {\r\n            var event = selector.events[iEvent] || [];\r\n            event.push(iHandler);\r\n            selector.events[iEvent] = event;\r\n         },\r\n\r\n         unbind: function (iEvent, iHandler) {\r\n            var handlers = selector.events[iEvent] || [];\r\n            if (iHandler) {\r\n               var idx = handlers.indexOf(iHandler);\r\n               if (idx !== -1)\r\n                  handlers.splice(idx, 1);\r\n            } else\r\n               handlers = [];\r\n            selector.events[iEvent] = handlers;\r\n         },\r\n\r\n         triggerHandler: function (iEvent, iArgs) {\r\n            var handlers = selector.events[iEvent] || [];\r\n            var args = [{ type: iEvent }];\r\n            if (Array.isArray(iArgs))\r\n               iArgs.forEach(function (arg) { args.push(arg); });\r\n            else if (iArgs)\r\n               args.push(iArgs);\r\n            handlers.forEach(function (handler) { handler.apply(this, args); });\r\n         },\r\n\r\n         load: function (iUrl, iArgs, iHandler) {\r\n            var request = new window.XMLHttpRequest();\r\n            request.open('GET', iUrl, true);\r\n            request.onload = function () {\r\n               if (request.status >= 200 && request.status < 400) {\r\n                  var response = request.responseText;\r\n                  document.querySelector(selector).innerHTML = response;\r\n                  iHandler.call(document.querySelector(selector));\r\n               }\r\n            };\r\n            request.send();\r\n            return { abort: function (reason) { return request.abort(reason); } };\r\n         }\r\n      };\r\n   },\r\n   jQueryDeferred,\r\n   {\r\n      support: { cors: true },\r\n\r\n      trim: function (iStr) { return typeof iStr === \"string\" ? iStr.trim() : iStr; },\r\n\r\n      inArray: function (iArray, iItem) { return iArray.indexOf(iItem) !== -1; },\r\n\r\n      makeArray: function makeArray(iArray) { return [].slice.call(iArray, 0); },\r\n\r\n      merge: function (iArray1, iArray2) { Array.prototype.push.apply(iArray1, iArray2); return iArray1; },\r\n\r\n      isEmptyObject: function (iObj) { return !iObj || Object.keys(iObj).length === 0 },\r\n\r\n      ajax: function (iOptions) {\r\n         var request = new window.XMLHttpRequest();\r\n         request.onreadystatechange = function () {\r\n            if (request.readyState !== 4)\r\n               return;\r\n            if (request.status === 200 && !request._hasError) {\r\n               try {\r\n                  iOptions.success && iOptions.success(JSON.parse(request.responseText));\r\n               }\r\n               catch (error) {\r\n                  iOptions.success && iOptions.success(request.responseText);\r\n               }\r\n            }\r\n            else\r\n               iOptions.error && iOptions.error(request);\r\n         };\r\n         request.open(iOptions.type, iOptions.url);\r\n         request.setRequestHeader(\"content-type\", iOptions.contentType);\r\n         request.send(iOptions.data.data && \"data=\" + iOptions.data.data);\r\n         return {\r\n            abort: function (reason) { return request.abort(reason); }\r\n         };\r\n      },\r\n\r\n      getScript: function (iUrl, iSuccess) {\r\n         var done = false;\r\n         var promise = jQueryDeferred.Deferred();\r\n         var head = document.getElementsByTagName(\"head\")[0];\r\n         var script = document.createElement(\"script\");\r\n         script.src = iUrl;\r\n         script.onload = script.onreadystatechange = function () {\r\n            if (!done && (!this.readyState || this.readyState == \"loaded\" || this.readyState == \"complete\")) {\r\n               done = true;\r\n               script.onload = script.onreadystatechange = null;\r\n               head.removeChild(script);\r\n               if (typeof iSuccess === \"function\")\r\n                  iSuccess();\r\n               promise.resolve();\r\n            }\r\n         };\r\n         head.appendChild(script);\r\n         return promise;\r\n      }\r\n   }\r\n);\r\n\r\nif (typeof window !== \"undefined\")\r\n   window.jQuery = window.jQuery || jQueryShim;\r\n\r\nif (typeof exports === \"object\" && typeof module === \"object\")\r\n   module.exports = jQueryShim;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport jQueryShim from '../libs/jquery-shim';\r\nconst signalRNetCore = require('@aspnet/signalr');\r\nlet $ = jQueryShim;\r\n\r\nif (typeof window == 'undefined') window = global;\r\n\r\nvar dotnetifyHub = $.extend(dotnetifyHub, {\r\n  version: '1.2.0',\r\n  type: null,\r\n  _init: false\r\n});\r\n\r\ndotnetifyHub.init = function(iHubPath, iServerUrl, signalR) {\r\n  if (dotnetifyHub._init) return;\r\n\r\n  dotnetifyHub._init = true;\r\n  signalR = signalR || window.signalR || signalRNetCore;\r\n\r\n  // SignalR .NET Core.\r\n  if (signalR && signalR.HubConnection) {\r\n    dotnetifyHub.type = 'netcore';\r\n\r\n    Object.defineProperty(dotnetifyHub, 'isConnected', {\r\n      get: function() {\r\n        return dotnetifyHub._connection && dotnetifyHub._connection.connection.connectionState === 1;\r\n      }\r\n    });\r\n\r\n    dotnetifyHub = $.extend(dotnetifyHub, {\r\n      hubPath: iHubPath || '/dotnetify',\r\n      url: iServerUrl,\r\n      reconnectDelay: [ 2, 5, 10 ],\r\n      reconnectRetry: null,\r\n\r\n      // Internal variables. Do not modify!\r\n      _connection: null,\r\n      _reconnectCount: 0,\r\n      _startDoneHandler: null,\r\n      _startFailHandler: null,\r\n      _disconnectedHandler: function() {},\r\n      _stateChangedHandler: function(iNewState) {},\r\n\r\n      _onDisconnected: function() {\r\n        dotnetifyHub._changeState(4);\r\n        dotnetifyHub._disconnectedHandler();\r\n      },\r\n\r\n      _changeState: function(iNewState) {\r\n        if (iNewState == 1) dotnetifyHub._reconnectCount = 0;\r\n\r\n        var stateText = { 0: 'connecting', 1: 'connected', 2: 'reconnecting', 4: 'disconnected', 99: 'terminated' };\r\n        dotnetifyHub._stateChangedHandler(stateText[iNewState]);\r\n      },\r\n\r\n      _startConnection: function(iHubOptions, iTransportArray) {\r\n        var url = dotnetifyHub.url ? dotnetifyHub.url + dotnetifyHub.hubPath : dotnetifyHub.hubPath;\r\n        var hubOptions = {};\r\n        Object.keys(iHubOptions).forEach(function(key) {\r\n          hubOptions[key] = iHubOptions[key];\r\n        });\r\n        hubOptions.transport = iTransportArray.shift();\r\n\r\n        dotnetifyHub._connection = new signalR.HubConnectionBuilder().withUrl(url, hubOptions).build();\r\n        dotnetifyHub._connection.on('response_vm', dotnetifyHub.client.response_VM);\r\n        dotnetifyHub._connection.onclose(dotnetifyHub._onDisconnected);\r\n\r\n        var promise = dotnetifyHub._connection\r\n          .start()\r\n          .then(function() {\r\n            dotnetifyHub._changeState(1);\r\n          })\r\n          .catch(function() {\r\n            // If failed to start, fallback to the next transport.\r\n            if (iTransportArray.length > 0) dotnetifyHub._startConnection(iHubOptions, iTransportArray);\r\n            else dotnetifyHub._onDisconnected();\r\n          });\r\n\r\n        if (typeof dotnetifyHub._startDoneHandler === 'function')\r\n          promise.then(dotnetifyHub._startDoneHandler).catch(dotnetifyHub._startFailHandler || function() {});\r\n        return promise;\r\n      },\r\n\r\n      start: function(iHubOptions) {\r\n        dotnetifyHub._startDoneHandler = null;\r\n        dotnetifyHub._startFailHandler = null;\r\n\r\n        // Map the transport option.\r\n        var transport = [ 0 ];\r\n        var transportOptions = { webSockets: 0, serverSentEvents: 1, longPolling: 2 };\r\n        if (iHubOptions && Array.isArray(iHubOptions.transport))\r\n          transport = iHubOptions.transport.map(function(arg) {\r\n            return transportOptions[arg];\r\n          });\r\n\r\n        var promise = dotnetifyHub._startConnection(iHubOptions, transport);\r\n        return {\r\n          done: function(iHandler) {\r\n            dotnetifyHub._startDoneHandler = iHandler;\r\n            promise.then(iHandler).catch(function(error) {\r\n              throw error;\r\n            });\r\n            return this;\r\n          },\r\n          fail: function(iHandler) {\r\n            dotnetifyHub._startFailHandler = iHandler;\r\n            promise.catch(iHandler);\r\n            return this;\r\n          }\r\n        };\r\n      },\r\n\r\n      disconnected: function(iHandler) {\r\n        if (typeof iHandler === 'function') dotnetifyHub._disconnectedHandler = iHandler;\r\n      },\r\n\r\n      stateChanged: function(iHandler) {\r\n        if (typeof iHandler === 'function') dotnetifyHub._stateChangedHandler = iHandler;\r\n      },\r\n\r\n      reconnect: function(iStartHubFunc) {\r\n        if (typeof iStartHubFunc === 'function') {\r\n          // Only attempt reconnect if the specified retry hasn't been exceeded.\r\n          if (!dotnetifyHub.reconnectRetry || dotnetifyHub._reconnectCount < dotnetifyHub.reconnectRetry) {\r\n            // Determine reconnect delay from the specified configuration array.\r\n            var delay =\r\n              dotnetifyHub._reconnectCount < dotnetifyHub.reconnectDelay.length\r\n                ? dotnetifyHub.reconnectDelay[dotnetifyHub._reconnectCount]\r\n                : dotnetifyHub.reconnectDelay[dotnetifyHub.reconnectDelay.length - 1];\r\n\r\n            dotnetifyHub._reconnectCount++;\r\n\r\n            setTimeout(function() {\r\n              dotnetifyHub._changeState(2);\r\n              iStartHubFunc();\r\n            }, delay * 1000);\r\n          }\r\n          else dotnetifyHub._changeState(99);\r\n        }\r\n      },\r\n\r\n      client: {},\r\n\r\n      server: {\r\n        dispose_VM: function(iVMId) {\r\n          dotnetifyHub._connection.invoke('Dispose_VM', iVMId);\r\n        },\r\n        update_VM: function(iVMId, iValue) {\r\n          dotnetifyHub._connection.invoke('Update_VM', iVMId, iValue);\r\n        },\r\n        request_VM: function(iVMId, iArgs) {\r\n          dotnetifyHub._connection.invoke('Request_VM', iVMId, iArgs);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  else {\r\n    // SignalR .NET FX.\r\n    dotnetifyHub.type = 'netfx';\r\n\r\n    if (window.jQuery) $ = window.jQuery;\r\n\r\n    // SignalR hub auto-generated from /signalr/hubs.\r\n    /// <reference path=\"..\\..\\SignalR.Client.JS\\Scripts\\jquery-1.6.4.js\" />\r\n    /// <reference path=\"jquery.signalR.js\" />\r\n    (function($, window, undefined) {\r\n      /// <param name=\"$\" type=\"jQuery\" />\r\n      'use strict';\r\n\r\n      if (typeof $.signalR !== 'function') {\r\n        throw new Error('SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.');\r\n      }\r\n\r\n      var signalR = $.signalR;\r\n\r\n      function makeProxyCallback(hub, callback) {\r\n        return function() {\r\n          // Call the client hub method\r\n          callback.apply(hub, $.makeArray(arguments));\r\n        };\r\n      }\r\n\r\n      function registerHubProxies(instance, shouldSubscribe) {\r\n        var key, hub, memberKey, memberValue, subscriptionMethod;\r\n\r\n        for (key in instance) {\r\n          if (instance.hasOwnProperty(key)) {\r\n            hub = instance[key];\r\n\r\n            if (!hub.hubName) {\r\n              // Not a client hub\r\n              continue;\r\n            }\r\n\r\n            if (shouldSubscribe) {\r\n              // We want to subscribe to the hub events\r\n              subscriptionMethod = hub.on;\r\n            }\r\n            else {\r\n              // We want to unsubscribe from the hub events\r\n              subscriptionMethod = hub.off;\r\n            }\r\n\r\n            // Loop through all members on the hub and find client hub functions to subscribe/unsubscribe\r\n            for (memberKey in hub.client) {\r\n              if (hub.client.hasOwnProperty(memberKey)) {\r\n                memberValue = hub.client[memberKey];\r\n\r\n                if (!$.isFunction(memberValue)) {\r\n                  // Not a client hub function\r\n                  continue;\r\n                }\r\n\r\n                subscriptionMethod.call(hub, memberKey, makeProxyCallback(hub, memberValue));\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      $.hubConnection.prototype.createHubProxies = function() {\r\n        var proxies = {};\r\n        this.starting(function() {\r\n          // Register the hub proxies as subscribed\r\n          // (instance, shouldSubscribe)\r\n          registerHubProxies(proxies, true);\r\n\r\n          this._registerSubscribedHubs();\r\n        }).disconnected(function() {\r\n          // Unsubscribe all hub proxies when we \"disconnect\".  This is to ensure that we do not re-add functional call backs.\r\n          // (instance, shouldSubscribe)\r\n          registerHubProxies(proxies, false);\r\n        });\r\n\r\n        proxies['dotNetifyHub'] = this.createHubProxy('dotNetifyHub');\r\n        proxies['dotNetifyHub'].client = {};\r\n        proxies['dotNetifyHub'].server = {\r\n          dispose_VM: function(vmId) {\r\n            return proxies['dotNetifyHub'].invoke.apply(proxies['dotNetifyHub'], $.merge([ 'Dispose_VM' ], $.makeArray(arguments)));\r\n          },\r\n\r\n          request_VM: function(vmId, vmArg) {\r\n            return proxies['dotNetifyHub'].invoke.apply(proxies['dotNetifyHub'], $.merge([ 'Request_VM' ], $.makeArray(arguments)));\r\n          },\r\n\r\n          update_VM: function(vmId, vmData) {\r\n            return proxies['dotNetifyHub'].invoke.apply(proxies['dotNetifyHub'], $.merge([ 'Update_VM' ], $.makeArray(arguments)));\r\n          }\r\n        };\r\n\r\n        return proxies;\r\n      };\r\n\r\n      signalR.hub = $.hubConnection(dotnetifyHub.hubPath, { useDefaultPath: false });\r\n      $.extend(signalR, signalR.hub.createHubProxies());\r\n    })($, window);\r\n\r\n    Object.defineProperty(dotnetifyHub, 'state', {\r\n      get: function() {\r\n        return $.connection.hub.state;\r\n      },\r\n      set: function(val) {\r\n        $.connection.hub.state = val;\r\n      }\r\n    });\r\n\r\n    Object.defineProperty(dotnetifyHub, 'client', {\r\n      get: function() {\r\n        return $.connection.dotNetifyHub.client;\r\n      }\r\n    });\r\n\r\n    Object.defineProperty(dotnetifyHub, 'server', {\r\n      get: function() {\r\n        return $.connection.dotNetifyHub.server;\r\n      }\r\n    });\r\n\r\n    Object.defineProperty(dotnetifyHub, 'isConnected', {\r\n      get: function() {\r\n        return $.connection.hub.state == $.signalR.connectionState.connected;\r\n      }\r\n    });\r\n\r\n    dotnetifyHub = $.extend(dotnetifyHub, {\r\n      hubPath: iHubPath || '/signalr',\r\n      url: iServerUrl,\r\n      reconnectDelay: [ 2, 5, 10 ],\r\n      reconnectRetry: null,\r\n\r\n      _reconnectCount: 0,\r\n      _stateChangedHandler: function(iNewState) {},\r\n\r\n      start: function(iHubOptions) {\r\n        if (dotnetifyHub.url) $.connection.hub.url = dotnetifyHub.url;\r\n\r\n        var deferred;\r\n        if (iHubOptions) deferred = $.connection.hub.start(iHubOptions);\r\n        else deferred = $.connection.hub.start();\r\n        deferred.fail(function(error) {\r\n          if (error.source && error.source.message === 'Error parsing negotiate response.')\r\n            console.warn('This client may be attempting to connect to an incompatible SignalR .NET Core server.');\r\n        });\r\n        return deferred;\r\n      },\r\n\r\n      disconnected: function(iHandler) {\r\n        return $.connection.hub.disconnected(iHandler);\r\n      },\r\n\r\n      stateChanged: function(iHandler) {\r\n        dotnetifyHub._stateChangedHandler = iHandler;\r\n        return $.connection.hub.stateChanged(function(state) {\r\n          if (state == 1) dotnetifyHub._reconnectCount = 0;\r\n\r\n          var stateText = { 0: 'connecting', 1: 'connected', 2: 'reconnecting', 4: 'disconnected' };\r\n          iHandler(stateText[state.newState]);\r\n        });\r\n      },\r\n\r\n      reconnect: function(iStartHubFunc) {\r\n        if (typeof iStartHubFunc === 'function') {\r\n          // Only attempt reconnect if the specified retry hasn't been exceeded.\r\n          if (!dotnetifyHub.reconnectRetry || dotnetifyHub._reconnectCount < dotnetifyHub.reconnectRetry) {\r\n            // Determine reconnect delay from the specified configuration array.\r\n            var delay =\r\n              dotnetifyHub._reconnectCount < dotnetifyHub.reconnectDelay.length\r\n                ? dotnetifyHub.reconnectDelay[dotnetifyHub._reconnectCount]\r\n                : dotnetifyHub.reconnectDelay[dotnetifyHub.reconnectDelay.length - 1];\r\n\r\n            dotnetifyHub._reconnectCount++;\r\n\r\n            setTimeout(function() {\r\n              dotnetifyHub._stateChangedHandler('reconnecting');\r\n              iStartHubFunc();\r\n            }, delay * 1000);\r\n          }\r\n          else dotnetifyHub._stateChangedHandler('terminated');\r\n        }\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport default dotnetifyHub;\r\n","/* \r\nCopyright 2017-2018 Dicky Suryadi\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n */\r\nimport dotnetifyHub from './dotnetify-hub';\r\nimport { createEventEmitter } from '../libs/utils';\r\n\r\nconst dotnetify = {\r\n  // SignalR hub options.\r\n  hub: dotnetifyHub,\r\n  hubOptions: { transport: [ 'webSockets', 'longPolling' ] },\r\n  hubPath: null,\r\n  hubServerUrl: null,\r\n\r\n  // Debug mode.\r\n  debug: false,\r\n  debugFn: null,\r\n\r\n  // Offline mode. (WIP)\r\n  offline: false,\r\n  isOffline: true,\r\n  offlineTimeout: 5000,\r\n  offlineCacheFn: null,\r\n\r\n  // Handler for connection state changed events.\r\n  connectionStateHandler: null,\r\n\r\n  // Connection events.\r\n  responseEvent: createEventEmitter(),\r\n  reconnectedEvent: createEventEmitter(),\r\n  connectedEvent: createEventEmitter(),\r\n  connectionFailedEvent: createEventEmitter(),\r\n\r\n  // Whether connected to SignalR hub server.\r\n  isConnected: function() {\r\n    return dotnetifyHub.isConnected;\r\n  },\r\n\r\n  // Whether SignalR hub is started.\r\n  isHubStarted: function() {\r\n    return !!dotnetify._hub;\r\n  },\r\n\r\n  // Generic connect function for non-React app.\r\n  connect: function(iVMId, iOptions) {\r\n    return dotnetify.react.connect(iVMId, null, iOptions);\r\n  },\r\n\r\n  initHub() {\r\n    if (dotnetify._hub !== null) return;\r\n\r\n    dotnetifyHub.init(dotnetify.hubPath, dotnetify.hubServerUrl, dotnetify.hubLib);\r\n\r\n    // Setup SignalR server method handler.\r\n    dotnetifyHub.client.response_VM = function(iVMId, iVMData) {\r\n      // SignalR .NET Core is sending an array of arguments.\r\n      if (Array.isArray(iVMId)) {\r\n        iVMData = iVMId[1];\r\n        iVMId = iVMId[0];\r\n      }\r\n\r\n      let handled = dotnetify.responseEvent.emit(iVMId, iVMData);\r\n\r\n      // If we get to this point, that means the server holds a view model instance\r\n      // whose view no longer existed.  So, tell the server to dispose the view model.\r\n      if (!handled) dotnetifyHub.server.dispose_VM(iVMId);\r\n    };\r\n\r\n    // On disconnected, keep attempting to start the connection.\r\n    dotnetifyHub.disconnected(function() {\r\n      dotnetify._hub = null;\r\n      dotnetifyHub.reconnect(function() {\r\n        dotnetify.reconnectedEvent.emit();\r\n      });\r\n    });\r\n\r\n    // Use SignalR event to raise the connection state event.\r\n    dotnetifyHub.stateChanged(function(state) {\r\n      dotnetify._triggerConnectionStateEvent(state);\r\n    });\r\n  },\r\n\r\n  startHub: function() {\r\n    const doneHandler = function() {\r\n      dotnetify.connectedEvent.emit();\r\n    };\r\n    const failHandler = function(ex) {\r\n      dotnetify.connectionFailedEvent.emit();\r\n      dotnetify._triggerConnectionStateEvent('error', ex);\r\n      throw ex;\r\n    };\r\n\r\n    if (dotnetify._hub === null) {\r\n      try {\r\n        dotnetify._hub = dotnetifyHub.start(dotnetify.hubOptions).done(doneHandler).fail(failHandler);\r\n      } catch (err) {\r\n        dotnetify._hub = null;\r\n      }\r\n    }\r\n    else {\r\n      try {\r\n        dotnetify._hub.done(doneHandler);\r\n      } catch (err) {\r\n        dotnetify._hub = null;\r\n        return dotnetify.startHub();\r\n      }\r\n    }\r\n  },\r\n\r\n  checkServerSideException: function(iVMId, iVMData, iExceptionHandler) {\r\n    const vmData = JSON.parse(iVMData);\r\n    if (vmData && vmData.hasOwnProperty('ExceptionType') && vmData.hasOwnProperty('Message')) {\r\n      const exception = { name: vmData.ExceptionType, message: vmData.Message };\r\n\r\n      if (typeof iExceptionHandler === 'function') {\r\n        return iExceptionHandler(exception);\r\n      }\r\n      else {\r\n        console.error('[' + iVMId + '] ' + exception.name + ': ' + exception.message);\r\n        throw exception;\r\n      }\r\n    }\r\n  },\r\n\r\n  requestVM(iVMId, iOptions) {\r\n    dotnetifyHub.server.request_VM(iVMId, iOptions);\r\n  },\r\n\r\n  updateVM(iVMId, iValue) {\r\n    dotnetifyHub.server.update_VM(iVMId, iValue);\r\n  },\r\n\r\n  disposeVM(iVMId) {\r\n    dotnetifyHub.server.dispose_VM(iVMId);\r\n  },\r\n\r\n  _triggerConnectionStateEvent: function(iState, iException) {\r\n    if (dotnetify.debug) console.log('SignalR: ' + (iException ? iException.message : iState));\r\n\r\n    if (typeof dotnetify.connectionStateHandler === 'function') dotnetify.connectionStateHandler(iState, iException);\r\n    else if (iException) console.error(iException);\r\n  },\r\n\r\n  // Internal variables. Do not modify!\r\n  _hub: null\r\n};\r\n\r\n// Support changing hub server URL after first init.\r\nObject.defineProperty(dotnetify, 'hubServerUrl', {\r\n  get: () => dotnetify.hub.url,\r\n  set: url => {\r\n    dotnetify.hub.url = url;\r\n    if (dotnetify.debug) console.log('SignalR: connecting to ' + dotnetify.hubServerUrl);\r\n    if (dotnetify._hub) {\r\n      dotnetify._hub = null;\r\n      dotnetify.startHub();\r\n    }\r\n  }\r\n});\r\n\r\nexport default dotnetify;\r\n","import dotnetify from './dotnetify-ko';\r\nimport './dotnetify-ko.router';\r\n\r\nmodule.exports = dotnetify;\r\n"],"sourceRoot":""}