// Run: node ./wwwroot/ssr-test
const ssr = require('./ssr.js');

ssr(
  function(_, output) {
    var body = output.match(/<body[^>]*>[\s\S]*<\/body>/gi);
    console.log(body[0]);
  },
  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.122 Safari/537.36',
  '/core/overview',
  `{"App":{"RoutingState":{"Templates":[{"Id":"Home","Root":null,"UrlPattern":"","ViewUrl":"Overview","JSModuleUrl":null,"Target":null},{"Id":"Overview","Root":null,"UrlPattern":"overview","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"DataFlow","Root":null,"UrlPattern":"dataflow","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Reactive","Root":null,"UrlPattern":"reactive","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"MicroFrontend","Root":null,"UrlPattern":"mfe","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"GetStarted","Root":null,"UrlPattern":"getstarted","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"HelloWorld","Root":null,"UrlPattern":"examples/helloworld","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"ControlTypes","Root":null,"UrlPattern":"examples/controltypes","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"SimpleList","Root":null,"UrlPattern":"examples/simplelist","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"CompositeView","Root":null,"UrlPattern":"examples/compositeview","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"LiveChart","Root":null,"UrlPattern":"examples/livechart","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"BookStore","Root":null,"UrlPattern":"examples/bookstore","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"SecurePage","Root":null,"UrlPattern":"examples/securepage","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"ChatRoom","Root":null,"UrlPattern":"examples/chatroom","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Connection","Root":null,"UrlPattern":"api/connection","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"CRUD","Root":null,"UrlPattern":"api/crud","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"DI","Root":null,"UrlPattern":"api/di","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"DotNetClient","Root":null,"UrlPattern":"api/dotnetclient","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Filter","Root":null,"UrlPattern":"api/filter","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"LocalMode","Root":null,"UrlPattern":"api/localmode","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Middleware","Root":null,"UrlPattern":"api/middleware","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Multicast","Root":null,"UrlPattern":"api/multicast","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Routing","Root":null,"UrlPattern":"api/routing","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Security","Root":null,"UrlPattern":"api/security","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"WebApiMode","Root":null,"UrlPattern":"api/webapimode","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"FromScratchWebPack","Root":null,"UrlPattern":"fromscratch-webpack","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"FromScratchScriptTag","Root":null,"UrlPattern":"fromscratch-scripttag","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"FromScratchCRA","Root":null,"UrlPattern":"fromscratch-cra","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"FromScratchCLI","Root":null,"UrlPattern":"fromscratch-cli","ViewUrl":null,"JSModuleUrl":null,"Target":null},{"Id":"Overview","Root":null,"UrlPattern":"*","ViewUrl":null,"JSModuleUrl":null,"Target":null}],"Root":"core","Active":null,"Origin":""},"NavMenu":[{"Route":{"TemplateId":"Overview","Path":"overview","RedirectRoot":null},"Label":"Overview","Icon":null},{"Route":{"TemplateId":"DataFlow","Path":"dataflow","RedirectRoot":null},"Label":"Data Flow Pattern","Icon":null},{"Route":{"TemplateId":"Reactive","Path":"reactive","RedirectRoot":null},"Label":"Reactive Programming","Icon":null},{"Route":{"TemplateId":"MicroFrontend","Path":"mfe","RedirectRoot":null},"Label":"Micro-Frontend","Icon":null},{"Route":{"TemplateId":"GetStarted","Path":"getstarted","RedirectRoot":null},"Label":"Get Started","Icon":null},{"IsExpanded":true,"Routes":[{"Route":{"TemplateId":"HelloWorld","Path":"examples/helloworld","RedirectRoot":null},"Label":"Hello World","Icon":null},{"Route":{"TemplateId":"ControlTypes","Path":"examples/controltypes","RedirectRoot":null},"Label":"Control Types","Icon":null},{"Route":{"TemplateId":"SimpleList","Path":"examples/simplelist","RedirectRoot":null},"Label":"Simple List","Icon":null},{"Route":{"TemplateId":"LiveChart","Path":"examples/livechart","RedirectRoot":null},"Label":"Live Chart","Icon":null}],"Label":"Basic Examples","Icon":null},{"IsExpanded":false,"Routes":[{"Route":{"TemplateId":"CompositeView","Path":"examples/compositeview","RedirectRoot":null},"Label":"Composite View","Icon":null},{"Route":{"TemplateId":"BookStore","Path":"examples/bookstore","RedirectRoot":null},"Label":"Book Store","Icon":null},{"Route":{"TemplateId":"SecurePage","Path":"examples/securepage","RedirectRoot":null},"Label":"Secure Page","Icon":null},{"Route":{"TemplateId":"ChatRoom","Path":"examples/chatroom","RedirectRoot":null},"Label":"Chat Room","Icon":null}],"Label":"Further Examples","Icon":null},{"IsExpanded":false,"Routes":[{"Route":{"TemplateId":"DotNetClient","Path":"api/dotnetclient","RedirectRoot":null},"Label":".NET Client","Icon":null},{"Route":{"TemplateId":"Connection","Path":"api/connection","RedirectRoot":null},"Label":"Connection Management","Icon":null},{"Route":{"TemplateId":"CRUD","Path":"api/crud","RedirectRoot":null},"Label":"CRUD","Icon":null},{"Route":{"TemplateId":"DI","Path":"api/di","RedirectRoot":null},"Label":"Dependency Injection","Icon":null},{"Route":{"TemplateId":"Filter","Path":"api/filter","RedirectRoot":null},"Label":"Filter","Icon":null},{"Route":{"TemplateId":"LocalMode","Path":"api/localmode","RedirectRoot":null},"Label":"Local Mode","Icon":null},{"Route":{"TemplateId":"Middleware","Path":"api/middleware","RedirectRoot":null},"Label":"Middleware","Icon":null},{"Route":{"TemplateId":"Multicast","Path":"api/multicast","RedirectRoot":null},"Label":"Multicast","Icon":null},{"Route":{"TemplateId":"Routing","Path":"api/routing","RedirectRoot":null},"Label":"Routing","Icon":null},{"Route":{"TemplateId":"Security","Path":"api/security","RedirectRoot":null},"Label":"Security","Icon":null},{"Route":{"TemplateId":"WebApiMode","Path":"api/webapimode","RedirectRoot":null},"Label":"Web API Mode","Icon":null}],"Label":"API Reference","Icon":null}],"Framework":null},
"Overview":{"Content":"OVERVIEW"},
"DataFlow":{"Content":"DATA FLOW"}}`
);
