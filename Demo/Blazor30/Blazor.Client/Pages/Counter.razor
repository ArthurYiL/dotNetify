@page "/counter"

<h1>Counter</h1>

<VMContext ref="@vm" VM="Counter" OnStateChanged=@((CounterState e) => { state = e; StateHasChanged(); })>
    <p>Current count: @state.CurrentCount</p>

    <button class="btn btn-primary" onclick="@IncrementCount">Click me</button>
</VMContext>

@functions {
    CounterState state = new CounterState();
    VMContext<CounterState> vm;

    class CounterState
    {
        public int CurrentCount { get; set; }
    }

    void IncrementCount()
    {
        vm.DispatchAsync(nameof(IncrementCount));
    }
}